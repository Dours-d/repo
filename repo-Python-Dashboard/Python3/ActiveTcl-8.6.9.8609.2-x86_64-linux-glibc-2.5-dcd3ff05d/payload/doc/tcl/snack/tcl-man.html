<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>ActiveTcl 8.6.9 Documentation</title>
    <meta name="generator" content="Hugo 0.26" />

    
    <meta name="description" content="Complete documentation for ActiveTcl 8.6.9">
    
    <link rel="canonical" href="tcl-man.html">
    

    
    <meta name="apple-mobile-web-app-title" content="ActiveTcl 8.6.9 Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('../../fonts/icon.eot');
        src: url('../../fonts/icon.eot')
               format('embedded-opentype'),
             url('../../fonts/icon.woff')
               format('woff'),
             url('../../fonts/icon.ttf')
               format('truetype'),
             url('../../fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../../stylesheets/application.css">
    <link rel="stylesheet" href="../../stylesheets/temporary.css">
    <link rel="stylesheet" href="../../stylesheets/palettes.css">
    <link rel="stylesheet" href="../../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open%20Sans:400,700|Source+Code+Pro">
    <style>
      body, input {
        font-family: 'Open Sans', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="../../stylesheets/as_common.css">
    
    <link rel="stylesheet" href="../../stylesheets/as_custom.css">
    
    <script src="../../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-grey palette-accent-red">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="logo">
        <a href="http://www.activestate.com/">
          <img src="../../images/logo.png" alt="ActiveState homepage">
        </a>
      </div>
      <div class="title">
        <a href="http://docs.activestate.com/">docs.activestate.com</a>
      </div>
    </div>

    

    
    
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>

</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="../../index.html" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../images/as_tcl.png">
        </div>
      
      <div class="name">
        <strong>ActiveTcl 8.6.9 Documentation </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  



<a  title="Get ActiveTcl" href="../../get/index.html">
	
	Get ActiveTcl
</a>



  
    <ul>
      
        
        



<a  title="Release notes" href="../../get/relnotes/index.html">
	
	Release notes
</a>



      
        
        



<a  title="Windows installation" href="../../get/windows/index.html">
	
	Windows installation
</a>



      
        
        



<a  title="Linux/Unix Installaton" href="../../get/linux/index.html">
	
	Linux/Unix Installaton
</a>



      
        
        



<a  title="macOS Installation" href="../../get/macos/index.html">
	
	macOS Installation
</a>



      
        
        



<a  title="License" href="../../get/license/index.html">
	
	License
</a>



      
    </ul>
  
</li>



<li>
  



<a  title="Get Started" href="../../start/index.html">
	
	Get Started
</a>



  
    <ul>
      
        
        



<a  title="Package Reference" href="../../pkg/index.html">
	
	Package Reference
</a>



      
        
        



<a  title="Tcl 8.6.9 docs" href="../contents.html">
	
	Tcl 8.6.9 docs
</a>



      
    </ul>
  
</li>



<li>
  



<a  title="Contact Us" href="../../contact/index.html">
	
	Contact Us
</a>



  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta name='Author' content='ActiveState'>

<meta http-equiv="Content-Type" content=
"text/html; charset=iso-8859-1">
<meta name="GENERATOR" content=
"Mozilla/4.72 [en] (X11; U; Linux 2.2.14-5.0 i686) [Netscape]">
<meta name="Author" content="K&aring;re Sj&ouml;lander">
<meta name="Description" content="Manual page for Snack">
<title>Snack Manual</title>
</head>
<body>

<h1><b>Snack v2.2.10 manual</b></h1>

<dl>
<dt><a href="tcl-man.html#audio">snack::audio</a></dt>

<dt><a href="tcl-man.html#debug">snack::debug</a></dt>

<dt><a href="tcl-man.html#filter">snack::filter</a></dt>

<dt><a href="tcl-man.html#mixer">snack::mixer</a></dt>

<dt><a href="tcl-man.html#sound">snack::sound</a></dt>

<dt><a href="tcl-man.html#spectrogram">spectrogram canvas item</a></dt>

<dt><a href="tcl-man.html#section">spectrum section canvas item</a></dt>

<dt><a href="tcl-man.html#waveform">waveform canvas item</a></dt>

<dt>&nbsp;</dt>

<dt><a href="tcl-man.html#defpack">Standard extension packages</a> (sound,
snackogg, snacksphere)</dt>

<dt>&nbsp;</dt>

<dt><a href="SnackLib.html">Snack library</a></dt>
</dl>

<hr>
<h3><a name="audio"></a>NAME</h3>

snack::audio - Get/set properties of audio devices

<h3>SYNOPSIS</h3>

<b>snack::audio property</b> ?arg? ...

<h3>DESCRIPTION</h3>

The audio command is used to get properties of audio devices such
as supported sample encoding formats and sample rates.

<p><b>snack::audio active</b></p>

<div style="margin-left: 2em">Returns 1 or 0 depending on whether
there is any current activity on the audio device.</div>

<b>snack::audio currentSound</b>

<div style="margin-left: 2em">Returns the name of any sound object
currently used for playback or record.</div>

<b>snack::audio elapsedTime</b>

<div style="margin-left: 2em">Returns the time in seconds since
playback or recording started on the audio device.</div>

<b>snack::audio encodings</b>

<div style="margin-left: 2em">Returns a list of supported sample
encoding formats for the current selected device.</div>

<b>snack::audio inputDevices</b>

<div style="margin-left: 2em">Returns a list of available audio
input devices.</div>

<a name="latency"></a><b>snack::audio playLatency</b>

<div style="margin-left: 2em">Sets/queries (in ms) how much sound
will be queued up at any time to the audio device for playback. A
low value makes new sound samples reach the loudspeakers quickly at
the risk of gaps in the output stream. An appropriate value should
be chosen with regard to processor speed and load. The default
value has been choosen to give adequate performance for a mix of
tasks and might be to low for simple playback in some cases. If
spurious gaps in the playback stream occur, try using a latency of
a couple of thousand milliseconds. On UNIX systems, the environment
variable PLAYLATENCY can also be used to control this
property.</div>

<b>snack::audio pause</b>

<div style="margin-left: 2em">Toggles between pause/play for all
playback on the audio device.</div>

<b>snack::audio play</b>

<div style="margin-left: 2em">Resumes paused playback on the audio
device.</div>

<b>snack::audio play_gain</b> <i>?value?</i>

<div style="margin-left: 2em">Returns the current play gain value
if invoked without a parameter. If a an integer value is given play
gain is set to the given value. Valid values are in the range
0-100.</div>

<b>snack::audio outputDevices</b>

<div style="margin-left: 2em">Returns a list of available audio
output devices.</div>

<b>snack::audio rates</b>

<div style="margin-left: 2em">Returns a list of supported sample
rates for the current selected device.</div>

<b>snack::audio record_gain</b> <i>?value?</i>

<div style="margin-left: 2em">Returns the current record gain value
if invoked without a parameter. If a an integer value is given
record gain is set to the given value. Valid values are in the
range 0-100.</div>

<b>snack::audio selectOutput</b> <i>device</i>

<div style="margin-left: 2em">Selects an audio output device to be
used as default.</div>

<b>snack::audio scaling</b> <i>?factor?</i>

<div style="margin-left: 2em">Scale the global output stream by
multiplying with <i>factor</i>. Useful to prevent clipping when
playing many simultaneous sounds. If no value is specified the
current factor is returned, default is 1.0.</div>

<b>snack::audio selectInput</b> <i>device</i>

<div style="margin-left: 2em">Selects an audio input device to be
used as default.</div>

<b>snack::audio stop</b>

<div style="margin-left: 2em">Stops all playback on the audio
device.</div>

<hr>
<h3><a name="debug"></a>NAME</h3>

snack::debug - Control Snack debugging facilities

<h3>SYNOPSIS</h3>

<b>snack::debug</b> level ?logFile? ?audioDumpFile?

<h3>DESCRIPTION</h3>

The debug command is used to control the debugging facilities of
Snack. The level flag is an integer (1-5) specifying the detail
level of the generated debug log. Level 1 just prints entry/exit
points of sound commands during execution. An optional second
filename argument can be given to specify a file where the log will
be written. An optional third filename can be given to specify a
file where a raw dump of all audio being played through the audio
device is to be generated. The sound file will be created in RAW
(headerless) format. Note that debugging has to be turned on for
each individual <a href="tcl-man.html#sound">sound</a> object of interest.
Reports on bugs/problems with Snack should typically include a
minimal script that shows the problem, any associated sound files,
and a debug log in order to facilitate a quick solution.

<hr>
<h3><a name="filter"></a>NAME</h3>

snack::filter - Create and manipulate filters

<h3>SYNOPSIS</h3>

<b>snack::filter type</b> ?arg? ...

<p><i>filterName option ?arg arg ...?</i></p>

<h3>DESCRIPTION</h3>

The filter command is used to create filter objects. These can
interact with sound objects either using the sound <a href=
"tcl-man.html#sfilter">filter</a> command or during <a href=
"tcl-man.html#splay">playback</a>. Note that since a filter object may contain
state information about a sound stream it should only be used for
one play operation at a time.

<h3>FILTER COMMAND</h3>

When a filter object is created, Snack returns the name of a newly
created object command. This command may be used to invoke various
operations on the filter.

<p><i>filterCmd</i> <b>configure ?arg ...?</b></p>

<div style="margin-left: 2em">Configures the filter command, see
the filter types for their respective options.</div>

<i>filterCmd</i> <b>destroy</b>

<div style="margin-left: 2em">Removes the filter command and frees
the storage associated with it. If the filter is currently used for
playback an unfiltered stream will be output as soon as the
internal buffer has been played.</div>

<h3>FILTER TYPES</h3>

Current filter types.

<p><b>compose</b> <i>filter filter ...</i></p>

<div style="margin-left: 2em">Creates a new filter which is a
linear combination of two or more other filters. The output of the
first is fed into the input of the next and so on.</div>

<b>echo</b> <i>inGain outGain delay decay ?delay decay ...?</i>

<div style="margin-left: 2em">Creates an echo effect. <i>inGain</i>
is a multiplicative factor applied on the input stream.
<i>outGain</i> is applied on the output. Both factors should be
between 0.0 and 1.0. For each echo a delay/decay pair should be
specified. The <i>delay</i> is specified in milliseconds and
<i>decay</i> is a factor relative to <i>inGain</i>.</div>

<b>fade</b> <i>direction type length ?floor?</i>

<div style="margin-left: 2em">An envelope filter for creating
fades. The option <i>direction</i> should be either <b>in</b> or
<b>out</b>. The option <i>type</i> one of <b>linear</b>,
<b>exponential</b>, or <b>logarithmic</b>. <i>length</i> should be
given in milliseconds. If needed a minimum fade level (value
between 0 and 1.0) can be given as parameter four.</div>

<b>formant</b> <i>frequency bandwidth</i>

<div style="margin-left: 2em">A formant filter with given
<i>frequency</i> and <i>bandwidth</i>.</div>

<b>generator</b> <i>frequency ?amplitude? ?shape? ?type? ?ntot?</i>


<div style="margin-left: 2em">A signal generator with given
<i>frequency</i> and <i>amplitude</i>. <i>type</i> can be any of
rectangle, triangle, sine, noise, or sampled. In the case of
sampled the generator will repeatedly get data from the sound it is
applied on. <i>shape</i> is a value between 0.0 and 1.0 used to
influence the shape of the signal. It is only useful for rectangle,
triangle, or sine types. Use a value of 0.5 with rectangle to get a
square wave or with triangle to get a triangle wave. Use a value of
0.0 with sine to get a sine wave and with triangle to get a
sawtooth wave. See the demo formant.tcl for an interactive
demonstration. <i>ntot</i> specifies how many samples to generate.
The default, -1, will generate forever.</div>

<b>iir</b> <i>?-denominator list? ?-dither value? ?-impulse list?
?-noise value? ?-numerator list?</i>

<div style="margin-left: 2em">Creates an IIR or FIR filter. For FIR
filters the coefficients are given as a list using the -impulse
option. For IIR filters the coefficients are given as lists using
the options -numerator and -denominator. The option -dither
specifies the amount of triangular dithering to add to the output.
The option -noise specifies the amount of additive gaussian noise
to add to the output.</div>

<b>map</b> <i>val ?val val val ...?</i>

<div style="margin-left: 2em">Applies a linear transformation on
each sample frame. For one channel sounds this is simply a
multiplication. For multi-channel sounds, a transformation matrix
can be specified with values row by row. One column per channel is
needed. If mono output is used, only one row needs to be specified.
If stereo output is used, only two rows needs to be specified. If
only one value is specified and the filter is used for
multi-channel data, each channel is multiplied with the given
value.</div>

<b>reverb</b> <i>outGain time delay ?delay ...?</i>

<div style="margin-left: 2em">A reverb effect. <i>outGain</i> is a
value between 0.0 and 1.0. <i>time</i> and <i>delay</i> are given
in milliseconds.</div>

<h3>BUGS</h3>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This command still needs
work.

<hr width="100%">
<h3><a name="mixer"></a><b>NAME</b></h3>

snack::mixer - Get/set properties of mixer devices <br>
&nbsp;

<h3><b>SYNOPSIS</b></h3>

<b>snack::mixer property</b> ?arg? ...

<h3>DESCRIPTION</h3>

The mixer command is used to get and set properties of mixer
devices such as current input/output jack, supported ports, mixer
lines, and gain.

<p><b>snack::mixer channels</b> <i>line</i></p>

<div style="margin-left: 2em">Returns a list with the names of the
channels for the specified <i>line</i>.</div>

<b>snack::mixer devices</b>

<div style="margin-left: 2em">Returns a list of available mixer
devices.</div>

<b>snack::mixer input</b> <i>?jack? ?varName?</i>

<div style="margin-left: 2em">Gets/sets the current input jack.
Optionally link a boolean Tcl variable.</div>

<a name="inputs"></a><b>snack::mixer inputs</b>

<div style="margin-left: 2em">Returns a list of available input
ports.</div>

<b>snack::mixer lines</b>

<div style="margin-left: 2em">Returns a list with the names of the
lines of the mixer device.</div>

<b>snack::mixer output</b> <i>?jack? ?varName?</i>

<div style="margin-left: 2em">Gets/sets the current output jack.
Optionally link a boolean Tcl variable.</div>

<a name="outputs"></a><b>snack::mixer outputs</b>

<div style="margin-left: 2em">Returns a list of available output
ports.</div>

<b>snack::mixer update</b>

<div style="margin-left: 2em">Updates all linked variables to
reflect the status of the mixer device.</div>

<b>snack::mixer volume</b> <i>line ?varName? ?varName?</i>

<div style="margin-left: 2em">Return the current volume setting for
<i>mixer</i>. Optionally link a Tcl variable to the value. If two
variable names are specified they are used for the left and right
channels respectively.</div>

<b>snack::mixer select</b> <i>?device?</i>

<div style="margin-left: 2em">Selects a mixer device to be used as
default.</div>

<hr width="100%">
<br>
NAME <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; snack::sound - Create
and manipulate sounds <br>
<a href="tcl-man.html#SYNOPSIS">SYNOPSIS</a> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; snack::sound ?name?
?options? <br>
<a href="tcl-man.html#DESCRIPTION">DESCRIPTION</a> <br>
<a href="tcl-man.html#CREATING SOUNDS">CREATING SOUNDS</a> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=
"tcl-man.html#sfile">snack::sound ?name? ?-load filename?&nbsp; ?-file
filename?&nbsp; ?-channel channelname? ?-rate f? ?-channels n?
?-encoding fmt? ?-fileformat fmt? ?-skiphead n? ?-byteorder
endianess? ?-guessproperties boolean?&nbsp; ?-buffersize n?
?-precision prec? -changecommand procedure? ?-debug level?</a> <br>
<a href="tcl-man.html#SOUND COMMAND">SOUND COMMAND</a>

<dl>
<dd><a href="tcl-man.html#sapp"><i>soundName</i> <b>append variable</b>
<b>?-rate f? ?-channels n? ?-encoding fmt? ?-skiphead n?
?-byteorder endianess? ?-start start? ?-end end? ?-guessproperties
boolean?</b></a></dd>

<dd><a href="tcl-man.html#scget"><i>soundName</i> <b>cget option</b></a></dd>

<dd><a href="tcl-man.html#schanged"><i>soundName</i> <b>changed
flag</b></a></dd>

<dd><a href="tcl-man.html#sconc"><i>soundName</i> <b>concatenate
sound</b></a></dd>

<dd><a href="tcl-man.html#sconf"><i>soundName</i> <b>configure option value
...</b></a></dd>

<dd><a href="tcl-man.html#sconv"><i>soundName</i> <b>convert option
value</b></a></dd>

<dd><a href="tcl-man.html#scopy"><i>soundName</i> <b>copy sound</b> <b>?-start
start? ?-end end?</b></a></dd>

<dd><a href="tcl-man.html#scut"><i>soundName</i> <b>cut sound start
end</b></a></dd>

<dd><a href="tcl-man.html#scrop"><i>soundName</i> <b>crop start
end</b></a></dd>

<dd><a href="tcl-man.html#sdata"><i>soundName</i> <b>data variable ?-rate f?
?-channels n? ?-encoding fmt? ?-skiphead n? ?-byteorder endianess?
?-start start? ?-end end? ?-guessproperties boolean?</b></a></dd>

<dd><a href="tcl-man.html#sdata"><i>soundName</i> <b>data ?-start start? ?-end
end? ?-fileformat fileformat? ?-byteorder endianess?</b></a></dd>

<dd><a href="tcl-man.html#sdest"><i>soundName</i> <b>destroy</b></a></dd>

<dd><a href="tcl-man.html#sfft"><i>soundName</i> <b>dBPowerSpectrum ?-start
sample? ?-end sample? ?-skip samples? ?-fftlength length?
?-windowlength length? ?-channel channel? ?-preemphasisfactor
factor? ?-windowtype type? ?-analysistype type? ?-lpcorder
n?</b></a></dd>

<dd><a href="tcl-man.html#sfilter"><i>soundName</i> <b>filter filterName
?-start sample? ?-end sample? ?-continedrain boolean? ?-progress
callback?</b></a></dd>

<dd><a href="tcl-man.html#sflush"><i>soundName</i> <b>flush</b></a></dd>

<dd><a href="tcl-man.html#sformant"><i>soundName</i> <b>formant ?-start sample?
?-end sample? ?-framelength t? ?-numformants n? ?-windowlength
length? ?-preemphasisfactor factor? ?-windowtype type? ?-lpctype?
?-lpcorder n? ?-ds_freq? ?-nom_f1_freq? ?-progress
callback?</b></a></dd>

<dd><a href="tcl-man.html#sinfo"><i>soundName</i> <b>info</b></a></dd>

<dd><a href="tcl-man.html#sins"><i>soundName</i> <b>insert sound position
?-start start? ?-end end?</b></a></dd>

<dd><a href="tcl-man.html#slast"><i>soundName</i> <b>lastIndex</b></a></dd>

<dd><a href="tcl-man.html#slen"><i>soundName</i> <b>length ?n? ?-unit
u?</b></a></dd>

<dd><a href="tcl-man.html#smax"><i>soundName</i> <b>max ?-start start? ?-end
end? ?-channel channel?</b></a></dd>

<dd><a href="tcl-man.html#smin"><i>soundName</i> <b>min ?-start start? ?-end
end? ?-channel channel?</b></a></dd>

<dd><a href="tcl-man.html#smix"><i>soundName</i> <b>mix sound</b> <b>?-start
start? ?-end end? ?-mixscaling factor? ?-prescaling factor?
?-progress callback?</b></a></dd>

<dd><a href="tcl-man.html#spause"><i>soundName</i> <b>pause</b></a></dd>

<dd><a href="tcl-man.html#spitch"><i>soundName</i> <b>pitch ?-method m? ?-start
start? ?-end end? ?-framelength t? ?-windowlength length?
?-maxpitch val? ?-minpitch val? ?-progress callback?</b></a></dd>

<dd><a href="tcl-man.html#splay"><i>soundName</i> <b>play ?-start start? ?-end
end? ?-output jack? ?-blocking boolean? -command ?callback?
?-device outputDevice? ?-devicerate rate? ?-devicechannels
channels?</b></a></dd>

<dd><a href="tcl-man.html#spower"><i>soundName</i> <b>power ?-start sample?
?-end sample? ?-framelength length? ?-windowlength length?
?-windowtype type? ?-preemphasisfactor factor? ?-channel channel?
?-progress callback?</b></a></dd>

<dd><a href="tcl-man.html#spowspect"><i>soundName</i> <b>powerSpectrum ?-start
sample? ?-end sample? ?-skip samples? ?-fftlength length?
?-windowlength length? ?-channel channel? ?-preemphasisfactor
factor? ?-windowtype type? ?-analysistype type? ?-lpcorder
n?</b></a></dd>

<dd><a href="tcl-man.html#sread"><i>soundName</i> <b>read</b> <i>filename</i>
<b>?-rate f? ?-channels n? ?-encoding fmt? ?-skiphead n?
?-byteorder endianess??-start start? ?-end end? ?-guessproperties
boolean ?-progress callback?</b></a></dd>

<dd><a href="tcl-man.html#srec"><i>soundName</i> <b>record ?-input jack?
?-append boolean? ?-device inputDevice?</b></a></dd>

<dd><a href="tcl-man.html#srev"><i>soundName</i> <b>reverse ?-start start?
?-end end? ?-progress callback?</b></a></dd>

<dd><a href="tcl-man.html#ssamp"><i>soundName</i> <b>sample n ?value?
...</b></a></dd>

<dd><a href="tcl-man.html#sspeat"><i>soundName</i> <b>speatures ?-start start?
?-end end? ?-channel channel? ?-framelength length? ?-windowlength
length? ?-preemphasisfactor factor? ?-windowtype type? ?-nchannels
n? ?-ncoeff n? ?-cepstrallifter boolean? ?-energy boolean?
?-zeromean boolean? ?-zerothcepstralcoeff boolean? ?-lowcutoff
freq? ?-highcutoff freq?</b></a></dd>

<dd><a href="tcl-man.html#sstop"><i>soundName</i> <b>stop</b></a></dd>

<dd><a href="tcl-man.html#swrite"><i>soundName</i> <b>write</b> <i>filename</i>
<b>?-start start? ?-end end?</b> <b>?-fileformat fileformat?
?-progress callback? -byteorder ?endianess?</b></a></dd>

<dd><br>
</dd>
</dl>

<hr>
<h3><a name="sound"></a>NAME</h3>

snack::sound - Create and manipulate sounds

<h3><a name="SYNOPSIS"></a>SYNOPSIS</h3>

<b>snack::sound</b> <i>soundName</i>

<p><i>soundName option ?arg arg ...?</i></p>

<h3><a name="DESCRIPTION"></a><b>DESCRIPTION</b></h3>

The <b>snack::sound</b> command is used to create sound objects.
Sound objects can interact with files, variables, canvas items and
the audio hardware.

<h3><a name="CREATING SOUNDS"></a>CREATING SOUNDS</h3>

The sound command is used to create sound objects. It can take
several different forms, depending on the option argument. The
legal forms are:

<p><a name="sfile"></a><b>snack::sound</b> <i>?soundName? ?-load
filename?</i>&nbsp;<i>?-file filename?</i>&nbsp; <i>?-channel
channelname? ?-rate f? ?-channels n? ?-encoding fmt? ?-fileformat
fmt? ?-skiphead n? ?-byteorder endianess? ?-guessproperties
boolean?&nbsp; ?-buffersize n? ?-precision prec? ?-changecommand
procedure? ?-debug level?</i></p>

<p><i>soundName</i> specifies the name of the sound. If it is
omitted then Snack picks a name of the form sound<i>n</i>, where
<i>n</i> is an integer. The <b>-load</b> option specifies that the
file <i>filename</i> should be read into memory after creating the
sound. The <b>-file</b> option specifies an on-disk file which
should be linked to the sound. The <b>-channel</b> option specifies
that audio data resides on a channel which should be linked to the
sound. In these cases the audio data is not loaded into memory,
which is useful when playing large files or when using streaming
audio. A value of 1 or larger must be specified for the
<b>-channels</b> option (<b>Mono</b>, or <b>Stereo</b> are also
valid). If not specified a default value of 1 is assumed. Possible
values for sample encoding format, given using the <b>-encoding</b>
option, are <b>Lin16</b>, <b>Lin8offset</b>, <b>Lin8</b>,
<b>Lin24</b>, <b>Lin32</b>, <b>Float</b>, <b>Alaw</b>, or
<b>Mulaw</b>. Default encoding is <b>Lin16</b>. The option
<b>-rate</b> can take any positive value but usually only sample
rates supported by the audio hardware are useful. Note that the
default value is 16000, a common value for speech related
applications, but less frequent for other uses, such as music.
<b>-fileformat</b> works as for the <b>read</b> command.
<b>-skiphead</b> is used to skip an unknown file header of size
<b>n</b> bytes. Byte order can be specified as littleEndian or
bigEndian using the <b>-byteorder</b> option. The option
<b>-guessproperties</b> is used to specify that Snack should try to
infer properties, such as byte order, sample encoding format, and
sample rate for a raw file by analyzing the contents of the file.
Byte order is almost always detected correctly. For channel based
sounds the <b>-buffersize</b> option can be used to specify the
size of the internal buffer in samples. The option
<b>-precision</b> is used to specify if sound data is to be handled
using simple or double precision internally. -<b>changecommand</b>
is used to specify a procedure which is to be called every time a
property of the sound is changed. This is the Tcl level counterpart
of Snack_AddCallback(). The procedure should expect one argument,
one of the strings <i>New, More,</i> or <i>Destroy</i>. This
feature is particularly useful when embedding sound objects in
other higher level constructs. The flag -<b>debug</b> is used to
control debug output for operations on the sound object. The option
takes a level argument, an integer in the range 1-5, specifying the
detail of the trace information.</p>

<p><a name="SOUND COMMAND"></a>SOUND COMMAND<br>
When a sound object is created, Snack also creates a new object
command whose name is the same as the sound. This command is used
to invoke various operations (or sub-commands) on the sound. This
is the current set:</p>

<p><a name="sapp"></a><i>soundName</i> <b>append</b>
<i>variable</i> <b>?-rate f? ?-channels n? ?-encoding fmt?
?-skiphead n? ?-byteorder endianess? ?-start start? ?-end</b>
<b>end? ?-fileformat fmt?</b> <b>?-guessproperties boolean?</b></p>

<div style="margin-left: 2em">Appends binary string data to the end
of <i>soundName</i>. The same options apply as for the <b>read</b>
command. This command applies to in-memory sounds only.</div>

<a name="scget"></a><i>soundName</i> <b>cget option</b>

<div style="margin-left: 2em">The cget command retrieves the
current value of an option for a sound. Option can be any of the
following: <b>-load, -file, -channel, -rate, -channels, -encoding,
-skiphead, -byteorder, -guessproperties</b>, <b>-precision</b>, and
<b>-buffersize</b>. See the <a href="tcl-man.html#sfile">sound</a> command for
more information on these.</div>

<a name="schanged"></a><i>soundName</i> <b>changed flag</b>

<div style="margin-left: 2em">This command is used to inform Snack
that the sound object has been modified. Normally Snack tracks
changes to sound objects automatically, but in a few cases this
must be performed explicitly. For example, if individual samples
are changed using the sample command these will not be tracked for
performance reasons. Here a <b>changed</b> command might be
necessary. <b>flag</b> can be either <i>New</i> or <i>More</i>.
<i>New</i> is used for any type of change while <i>More</i> only
applies to the case where more samples has been appended.</div>

<a name="sconc"></a><i>soundName</i> <b>concatenate sound</b>

<div style="margin-left: 2em">Concatenates the sample data from
<b>sound</b> to the end of <i>soundName</i>. The sound to be added
must be of the same type as the base sound, i.e. have the same
sample rate, sample encoding format, and number of channels). Note
that even an initially empty sound has these properties defined.
This command applies to in-memory sounds only.</div>

<a name="sconf"></a><i>soundName</i> <b>configure option value
...</b>

<div style="margin-left: 2em">The configure command is used to set
options for a sound. Options can be any of the following: <b>-load,
-file, -channel, -rate, -channels, -encoding, -skiphead,
-byteorder, -guessproperties, -precision, -debug</b> and
<b>-buffersize</b>. See the <a href="tcl-man.html#sfile">sound</a> command for
more information on these.</div>

<a name="sconv"></a><i>soundName</i> <b>convert option value
...</b>

<div style="margin-left: 2em">The convert command is used to
convert a sound to a different sample encoding, sample rate, or
number of channels. Options can be any of the following: <b>-rate,
-channels,</b> <b>-encoding,</b> and <b>-progress</b>. A value of 1
or larger must be specified for the <b>-channels</b> option
(<b>Mono</b>, or <b>Stereo</b> are also valid). Only conversions
from many channels to one or the reverse are possible. Values for
sample encoding format are <b>Lin16</b>, <b>Lin8offset</b>,
<b>Lin8</b>, <b>Lin24</b>, <b>Lin32</b>, <b>Float</b>, <b>Alaw</b>,
or <b>Mulaw</b>. The current sample rate conversion algorithm is
simple and may not be suitable for all needs. See the <a href=
"tcl-man.html#sread">read</a> command for a description on how to use the
<b>-progress</b> option. This command applies to in-memory sounds
only.</div>

<a name="scopy"></a><i>soundName</i> <b>copy sound</b> <b>?-start
start? ?-end end?</b>

<div style="margin-left: 2em">Copies sample data from <b>sound</b>.
Optionally a range of samples to copy can be specified. Any active
play operation is stopped before the command is executed if the
format of the new sound differs from the current. This command
applies to in-memory sounds only.</div>

<a name="scrop"></a><i>soundName</i> <b>crop start end</b>

<div style="margin-left: 2em">Crops the sound to the given range
<b>[start end]</b>, i.e. all samples before and after these limits
will be removed. This command applies to in-memory sounds
only.</div>

<a name="scut"></a><i>soundName</i> <b>cut start end</b>

<div style="margin-left: 2em">Cuts the given range <b>[start
end]</b> from the sound, i.e. all samples between and including
these limits will be removed. This command applies to in-memory
sounds only.</div>

<a name="sdata"></a><i>soundName</i> <b>data ?variable? ?option
value? ...</b>

<div style="margin-left: 2em">Loads sound data from, or writes to,
a binary string.

<p>When loading data the same options apply as for the <b>read</b>
command:</p>

<p><i>soundName</i> <b>data variable ?-rate f? ?-channels n?
?-encoding fmt? ?-skiphead n? ?-byteorder endianess?</b> <b>?-start
start? ?-end end??-fileformat fmt?</b> <b>?-guessproperties
boolean?</b></p>

<p>The command returns the file format detected. Any active play
operation is stopped before data is loaded.</p>

<p>When writing data to a binary string <b>-start</b> and
<b>-end</b> options can be given (as for the <b>write</b> command).
Also, a <b>-fileformat</b> option can be given if the file format
should be different from the original. In the case of RAW file
format the endianess can be specified as either bigEndian or
littleEndian.</p>

<p><i>soundName</i> <b>data ?-start start? ?-end end?</b>
<b>?-fileformat fileformat? -byteorder ?endianess?</b></p>

<p>This command applies to in-memory sounds only.</p>
</div>

<a name="sdest"></a><i>soundName</i> <b>destroy</b>

<div style="margin-left: 2em">Removes the sound command and frees
the storage associated with it.</div>

<a name="sfft"></a><i>soundName</i> <b>dBPowerSpectrum</b>
<b>?-start sample? ?-end sample? ?-fftlength length? ?-windowlength
length? ?-windowtype type? ?-skip samples? ?-channel channel?
?-preemphasisfactor factor? ?-analysistype type? ?-lpcorder n?</b>

<div style="margin-left: 2em">Computes the log FFT power spectrum
of the sound at <b>-start</b> and returns a list of dB values.
Optionally an end point can be given, using <b>-end</b>. In this
case the result is the average of consecutive FFT's in the
specified range. Their default spacing is taken from
<b>-fftlength</b> but this can be changed using the <b>-skip</b>
option which specifies how many points to move the FFT window
forward at each step. See the <a href="tcl-man.html#section">section item</a>
for the rest of the options.</div>

<a name="sfilter"></a><i>soundName</i> <b>filter filterName ?-start
sample? ?-end sample? ?-continuedrain boolean? ?-progress
callback?</b>

<div style="margin-left: 2em">Applies the <a href=
"tcl-man.html#filter">filter</a> <b>filterName</b> to the sound. Optionally, a
range to apply the filter on can be specified. The
<b>-continuedrain</b> option specifies whether the filter should be
allowed to drain out past the end point. See the <a href=
"tcl-man.html#sread">read</a> command for a description on how to use the
<b>-progress</b> option. This command applies to in-memory sounds
only.</div>

<a name="sflush"></a><i>soundName</i> <b>flush</b>

<div style="margin-left: 2em">Removes all audio data from the
sound. This command applies to in-memory sounds only.</div>

<a name="sformant"></a><i>soundName</i> <b>formant ?-start sample?
?-end sample? ?-framelength t? ?-numformants n? ?-windowlength
length? ?-preemphasisfactor factor? ?-windowtype type? ?-lpctype?
?-lpcorder n? ?-ds_freq? ?-nom_f1_freq? ?-progress callback?</b>

<div style="margin-left: 2em">Estimates speech formant
trajectories. Dynamic programming is used to optimize trajectory
estimates by imposing frequency continuity constraints. The formant
frequencies are selected from candidates proposed by solving for
the roots of the linear predictor polynomial computed periodically.
The local costs of all possible mappings of the complex roots to
formant frequencies are computed at each frame based on the
frequencies and bandwidths of the component formants for each
mapping. The cost of connecting each of these mappings with each of
the mappings in the previous frame is then minimized using a
modified Viterbi algorithm. The command returns a list with one
element per frame, each containg a list with formant and bandwidth
values, {F1 F2 ... B1 B2 ...}. The first row corresponds to a start
time of half the window length, see the <b>-windowlength</b>
option. The option <b>-numformants</b> controls how many formants
to calculate (default 4, maximum 7). The <b>-framelength</b> option
specifies the intervals between the values (default 0.01). The
option <b>-windowtype</b> is used to select windowing function,
(valid values are Cos^4 (default), Hamming, Hanning, or Rectangle).
<b>-windowlength</b> specifies the size of the window in seconds
(default 0.049). <b>-preemphasisfactor</b> is used to specify the
amount of preemphasis applied to the signal prior to windowing
(default 0.7). A range of samples can be given using <b>-start</b>
and <b>-end</b>. <b>-lpctype</b> is either 0 (autocorrelation) or 1
(stabilized covariance). The order of the LPC analysis specified
using <b>-lpcorder</b> (default 12). The option <b>-ds_freq</b>
specifies the sampling rate of the data to be used in the formant
frequency analysis (default 10000). <b>-nom_f1_freq</b> specifies
the nominal value of the first formant frequency. This value is
used to adjust the nominal values of all other formants and of the
ranges over which the formants are permitted to exist. The default
value of 500Hz assumes that the vocal tract length is 17 cm and
that the speed of sound is 34000 cm/sec. Nominal F1 values scale
directly with sound velocity and inversely with vocal-tract length.
See the <a href="tcl-man.html#sread">read</a> command for a description on how
to use the <b>-progress</b> option.</div>

<a name="sinfo"></a><i>soundName</i> <b>info</b>

<div style="margin-left: 2em">Returns a list with information about
the sound. The entries are {<i>length rate "maximum sample"
"minimum sample" "sample encoding" "number of channels" "file
format" "header size in bytes"</i>}</div>

<a name="sins"></a><i>soundName</i> <b>insert sound position
?-start start? ?-end end?</b>

<div style="margin-left: 2em">Inserts sound at position. Optionally
a range of samples to insert can be specified. This command applies
to in-memory sounds only.</div>

<a name="slast"></a><i>soundName</i> <b>lastIndex</b>

<div style="margin-left: 2em">Returns the last sample index of the
sound object.</div>

<a name="slen"></a><i>soundName</i> <b>length ?n? ?-unit u?</b>

<div style="margin-left: 2em">Gets or sets the length of the sound
in number of samples (default), or seconds, by setting <b>u</b> to
either SAMPLES or SECONDS. If the new length is larger than the
current the sound is padded with additional silence.</div>

<a name="smax"></a><i>soundName</i> <b>max ?-start start? ?-end
end? ?-channel channel?</b>

<div style="margin-left: 2em">Returns the largest positive sample
value of the sound. A range of samples and a channel to be examined
can be specified. The default is to check all channels and return
the maximum value.</div>

<a name="smin"></a><i>soundName</i> <b>min ?-start start? ?-end
end? ?-channel channel?</b>

<div style="margin-left: 2em">Returns the largest negative sample
value of the sound. A range of samples and a channel to be examined
can be specified. The default is to check all channels and return
the minimum value.</div>

<a name="smix"></a><i>soundName</i> <b>mix sound</b> <b>?-start
start? ?-end end? ?-mixscaling factor? ?-prescaling factor?
?-progress callback?</b>

<div style="margin-left: 2em">Copies sample data from <b>sound</b>.
Optionally a range of samples, where the mix operation will be
applied, can be specified. The <b>-mixscaling</b> option controls
how much to scale <i>soundName</i> before mixing. The option
<b>-prescaling</b> controls how much to scale the original sound
before mixing. This command applies to in-memory sounds only.</div>

<a name="spause"></a><i>soundName</i> <b>pause</b>

<div style="margin-left: 2em">Pause current play/record operation.
Next <b>pause</b> invocation resumes play/record. If several play
operations for one sound object are in progress all of them are
paused using <b>pause</b>.</div>

<a name="spitch"></a><i>soundName</i> <b>pitch ?-method m? ?-start
start? ?-end end? ?-framelength t? ?-windowlength length?
?-maxpitch val? ?-minpitch val? ?-progress callback?</b>

<div style="margin-left: 2em">Returns a list of pitch values
computed using either the normalized cross correlation function and
dynamic programming or the AMDF method. This is selected using the
<b>-method</b> option, by specifying either ESPS or AMDF. For ESPS
the output list will contain 4 fields for each frame, pitch,
probability of voicing, local root mean squared measurements, and
the peak normalized cross-correlation value that was found to
determine the output pitch value. The values are spaced according
to the -framelength option (default 0.01). The first row
corresponds to either 0.0 (for AMDF), or to half the window length
(for ESPS), see the <b>-windowlength</b> option. A range of samples
can be given using <b>-start</b> and <b>-end</b>. If a frequency
range of valid pitch values is known this can be specified using
the options <b>-maxpitch</b> (default 400) and <b>-minpitch</b>
(default 60). <b>-windowlength</b> specifies the size of the window
in seconds (default 0.0075). See the <a href="tcl-man.html#sread">read</a>
command for a description on how to use the <b>-progress</b>
option.</div>

<a name="splay"></a><i>soundName</i> <b>play ?-start start? ?-end
end? ?-output jack??-blocking boolean? ?-command callback? ?-device
outputDevice? ?-filter filter? ?-devicerate f? ?-devicechannels
n?</b>

<div style="margin-left: 2em">Plays a sound. A start position can
be specified using the <b>-start</b> option and an end position
using the <b>-end</b> option. The values should be given in samples
and the end of the sound can be given as <b>-1</b>. The
<b>-output</b> option is used to specify any of the possible output
ports returned by the <a href="tcl-man.html#outputs">audio outputs</a> command.
The <b>-blocking</b> option is used to specify whether playback
should be asynchronous or not, i.e. if it is to be played in the
background or if the <b>play</b> command should return only after
the sound has been played. Asynchronous playback is only possible
if the event loop is running, e.g., if the script uses the wish
interpreter with a graphical user interface. Otherwise the event
loop needs to be started using for example <b>vwait</b>. The
<b>-command</b> option specifies a command to be executed when the
end of the sound is reached. The <b>-device</b> option selects
which audio output device to use. The <b>-filter</b> option is used
to specify a <a href="tcl-man.html#filter">filter</a> which is to be applied
during output. The audio device can be opened with different
properties from those of the sound object using <b>-devicerate</b>
and <b>-devicechannels</b>, which might be useful in some rare
cases. The option <b>-starttime</b> is used to schedule the start
of playback (in ms) relative to a previous play operation. All
options are ignored if <b>play</b> is used to resume a paused play
operation. If a <b>play</b> command is issued while another one is
in progress, the new sound will start to play as soon as possible
given the internal buffering. The lag before the sound is audible
can be controlled using the <a href="tcl-man.html#latency">snack::audio
latency</a> command.</div>

<a name="spower"></a><i>soundName</i> <b>power ?-start sample?
?-end sample? ?-framelength length? ?-windowlength length?
?-windowtype type? ?-preemphasisfactor factor? ?-channel channel?
?-progress callback?</b>

<div style="margin-left: 2em">Returns a list of windowed log power
values. The <b>-framelength</b> option specifies the intervals
between the values. The option <b>-windowtype</b> is used to select
windowing function, (valid values are Hamming, Hanning, Bartlett,
Blackman, or Rectangle). <b>-windowlength</b> specifies the size of
the window in points. -<b>preemphasisfactor</b> is used to specify
the amount of preemphasis applied to the signal prior to windowing.
A range of samples can be given using <b>-start</b> and
<b>-end</b>. See the <a href="tcl-man.html#sread">read</a> command for a
description on how to use the <b>-progress</b> option and the <a
href="tcl-man.html#section">section item</a> for the <b>-channel</b>
option.</div>

<a name="spowspect"></a><i>soundName</i> <b>powerSpectrum</b>
<b>?-start sample? ?-end sample? ?-fftlength length? ?-windowlength
length? ?-windowtype type? ?-skip samples? ?-channel channel?
?-preemphasisfactor factor? ?-analysistype type? ?-lpcorder n?</b>

<div style="margin-left: 2em">Computes the FFT power spectrum of
the sound at <b>-start</b> and returns a list of magnitude values.
Optionally an end point can be given, using <b>-end</b>. In this
case the result is the average of consecutive FFT's in the
specified range. Their default spacing is taken from
<b>-fftlength</b> but this can be changed using the <b>-skip</b>
option which specifies how many points to move the FFT window
forward at each step. See the <a href="tcl-man.html#section">section item</a>
for the rest of the options.</div>

<a name="sread"></a><i>soundName</i> <b>read</b> <i>filename</i>
<b>?-fileformat fmt?</b> <b>?-rate f? ?-channels n? ?-encoding fmt?
?-skiphead n? ?-byteorder endianess? ?-start start? ?-end end?</b>
<b>?-guessproperties boolean? ?-progress callback?</b>

<div style="margin-left: 2em">Reads new sound data from a file.
Current supported file formats are WAV, MP3, AU, SND, AIFF, SD,
SMP, CSL, and RAW binary. The command returns the file format
detected. It is possible to force a file to be read as RAW using
"<b>-fileformat</b> RAW". In this case the properties of the sound
data should be specified by hand. <b>-rate</b> and <b>-channels</b>
are used to set the sampling rate and the number of channels
(<b>Mono</b>/<b>Stereo</b>). The <b>-encoding</b> option is used to
specify sample encoding format. Currently, the formats
<b>Lin16</b>, <b>Lin8offset</b>, <b>Lin8</b>,<b>Lin24</b>,
<b>Lin32</b>, <b>Float</b>, <b>Alaw</b>, and <b>Mulaw</b> are
supported. <b>-skiphead</b> is used to skip an unknown header of
size <b>n</b> bytes, and <b>-byteorder</b> is used to specify
endianess (<b>bigEndian</b>/<b>littleEndian</b>).&nbsp; The option
<b>-guessproperties</b> is used to specify that Snack should try to
infer properties, such as byte order, sample encoding format, and
sample rate for raw files by analyzing the contents of the file.
Byte order is almost always detected correctly. It is possible to
add a progress callback procedure which is to be called at regular
intervals using the <b>-progress</b> option. This procedure is
called with two arguments, first the string "Read sound" and then a
double value specifying the fraction of the command that currently
has been completed.&nbsp; If the callback returns with an error
code (return -code error) the read operation is cancelled. The
convenience routine snack::progressCallback opens up a message box
with an appropriate message if used as argument procedure to this
option. Any active play operation is stopped before the command is
executed, if the format of the new sound data differs from the
current. This command applies to in-memory sounds only.</div>

<a name="srec"></a><i>soundName</i> <b>record ?option value?
...</b>

<div style="margin-left: 2em">Starts recording data from the audio
device into the sound object. For in-memory sound objects the
command has the following form:

<p><i>soundName</i> <b>record ?-input jack? ?-append boolean?
?-device inputDevice?</b> The <b>-input</b> option specifies one of
the available input ports returned by the <a href="tcl-man.html#inputs">audio
inputs</a> command. <b>-append</b> specifies that new audio data
should be appended at the end of the existing sound instead of
replacing it. The <b>-device</b> option selects which audio input
device to use.</p>

<p>File and channel based sounds have the options:</p>

<p><i>soundName</i> <b>record ?-input jack? ?-fileformat fmt?
?-device inputDevice?</b></p>

<p>The <b>-fileformat</b> option can be used to specify the file
format to be used when writing data to a channel. In this case
there is no file name to infer the format from.</p>

<p>Note that recording is only possible if the event loop is
running, e.g., if the script uses the wish interpreter with a
graphical user interface. Otherwise the event loop needs to be
started using for example <b>vwait</b>. Just using <b>after n</b>
between a <b>record/stop</b> command pair is not enough. Use
something like <b>after n {set flag 1} ; vwait flag</b> in order to
make sure the event loop is kept active</p>
</div>

<a name="srev"></a><i>soundName</i> <b>reverse ?-start start? ?-end
end? ?-progress callback?</b>

<div style="margin-left: 2em">Reverses a <b>sound</b>. Optionally a
range of samples to be reversed can be specified. See the <a href=
"tcl-man.html#sread">read</a> command for a description on how to use the
<b>-progress</b> option. This command applies to in-memory sounds
only.</div>

<a name="ssamp"></a><i>soundName</i> <b>sample n ?value? ...</b>

<div style="margin-left: 2em">Gets or sets sample number <b>n</b>.
When setting samples one value should be specified for each
channel. A ? character can be used to specify that a certain value
should not be affected, i. e. "snd sample 10000 ? 999", would set
the right channel of sample number 10000 of sound snd to the value
of 999 without influencing the left channel. Samples can be read
for all sound types but can only be set for in-memory sounds.</div>

<a name="sspeat"></a><i>soundName</i> <b>speatures sound ?-start
start? ?-end end? ?-channel channel? ?-framelength length?
?-windowlength length? ?-preemphasisfactor factor? ?-windowtype
type? ?-nchannels n? ?-ncoeff n? ?-cepstrallifter boolean? ?-energy
boolean? ?-zeromean boolean? ?-zerothcepstralcoeff boolean?
?-lowcutoff freq? ?-highcutoff freq?</b>

<div style="margin-left: 2em">Compute speech recognition feature
vectors. The resulting parameters will be stored in <b>sound</b>.
Parameterization and options are compatible with the ones used by
the <a href="http://htk.eng.cam.ac.uk">The Hidden Markov Model
Toolkit (HTK)</a>.</div>

<a name="sstop"></a><i>soundName</i> <b>stop</b>

<div style="margin-left: 2em">Stops current play or record
operation. If there is a queue of sounds to play, each of them can
stop playback using <b>stop</b>. Any callbacks registered using the
<b>-command</b> option of the <b>play</b> command will not be
executed.</div>

<a name="swrite"></a><i>soundName</i> <b>write</b> <i>filename</i>
<b>?-start start? ?-end end?</b> <b>?-fileformat fileformat?
?-byteorder endianess? ?-progress callback?</b>

<div style="margin-left: 2em">Writes sound data to a file. A range
of samples to save can be specified using the <b>-start</b> and
<b>-end</b> options. The file format is inferred from the filename
extension. Currently, the supported formats are WAV, AU, SND, AIFF,
SMP, CSL, and RAW. The <b>-fileformat</b> option overrides the
guess from file name extension. If you specify RAW file format the
sound will be saved to file without a header using the natural byte
order of the machine. This can be overridden using the option
-<b>byteorder</b>. See the <a href="tcl-man.html#sread">read</a> command for a
description on how to use the <b>-progress</b> option.</div>

<hr width="100%">
<h3><a name="spectrogram"></a>NAME</h3>

spectrogram - Spectrogram canvas item

<h3>SYNOPSIS</h3>

<i>pathName</i> <b>create</b> <b>spectrogram</b> x y ?options value
option value ...?

<h3>OPTIONS</h3>

<dl>
<dd>-<b>anchor</b> <i>anchorPos</i></dd>

<dd>-<b>brightness</b> <i>value</i></dd>

<dd>-<b>channel</b> <i>channel</i></dd>

<dd>-<b>colormap</b> <i>colorlist</i></dd>

<dd>-<b>contrast</b> <i>value</i></dd>

<dd>-<b>debug</b> <i>level</i></dd>

<dd>-<b>end</b> <i>sample</i></dd>

<dd>-<b>fftlength</b> <i>length</i></dd>

<dd>-<b>gridcolor</b> <i>color</i></dd>

<dd>-<b>gridfspacing</b> <i>value</i></dd>

<dd>-<b>gridtspacing</b> <i>value</i></dd>

<dd>-<b>height</b> <i>size</i></dd>

<dd>-<b>pixelspersecond</b> <i>value</i></dd>

<dd>-<b>preemphasisfactor</b> <i>factor</i></dd>

<dd>-<b>sound</b> <i>name</i></dd>

<dd>-<b>start</b> <i>sample</i></dd>

<dd>-<b>tags</b> <i>tagList</i></dd>

<dd>-<b>topfrequency</b> <i>frequency</i></dd>

<dd>-<b>width</b> <i>size</i></dd>

<dd>-<b>windowtype</b> <i>type</i></dd>

<dd>-<b>winlength</b> <i>length</i></dd>
</dl>

<h3>DESCRIPTION</h3>

This command draws the spectrogram of a sound. The options
-<b>anchor</b>, and -<b>tags</b> work as for other Tk canvas items.
-<b>sound</b> specifies which sound object to link to and
-<b>height</b> the height of the spectrogram. The option
<b>-fftlength</b> specifies the number of FFT points (8, 16, 32,
64, 128, 256, 512, 1024, 2048, or 4096). The default value is 256.
The option <b>-windowtype</b> is used to select windowing function,
(valid values are Hamming, Hanning, Bartlett, Blackman, or
Rectangle). The default window type is Hamming. <b>-winlength</b>
specifies the size of the hamming window, which should be equal to
or less than the number of FFT points. The default window length is
128. -<b>preemphasisfactor</b> is used to specify the amount of
preemphasis applied to the signal prior to the FFT calculation,
default 0.97. <b>-start</b> and <b>-end</b> controls which part of
the sound to display. <b>-pixelspersecond</b> determines the
scaling factor in the x-direction. The <b>-width</b> option
specifies the width of the spectrogram. If both <b>-width</b> and
<b>-pixelspersecond</b> are specified the spectrogram will be cut
at one end depending on if a <b>-start</b> or <b>-end</b> option
was also given. Currently, spectrograms have a width limit of 32767
pixels. Use the <b>-channel</b> option to select which channel to
show for multichannel sounds. Use left, right, both, all, -1 (all)
or a channel number counting from 0 (left). The default is to show
all, i.e. to add all channels. -<b>brightness</b> and
-<b>contrast</b> takes values beteween -100.0 and 100.0 with the
default being 0.0. -<b>topfrequency</b> is the frequency value at
the top of the spectrogram, default is the Nyquist frequency.
-<b>gridtspacing</b> is the spacing between markers in seconds
(default 0 means no grid) and -<b>gridfspacing</b> is the frequency
spacing in Hz (default 0 means no grid). -<b>gridcolor</b>
specifies the color of the grid. A colormap for the spectrogram is
given with the -<b>colormap</b> option. It takes a list of colors
as parameter and at least two must be specified. The first color is
used for the lowest intensity in the spectrogram. An empty list
gives the default 32-level grey scale. The flag -<b>debug</b> is
used to control debug output for the item. The option takes a level
argument, an integer in the range 1-5, specifying the detail of the
trace information. <br>
See also the code examples in the widget demonstration.

<hr>
<h3><a name="section"></a>NAME</h3>

section - Spectrum section canvas item

<h3>SYNOPSIS</h3>

<i>pathName</i> <b>create</b> <b>section</b> x y ?options value
option value ...?

<h3>OPTIONS</h3>

<dl>
<dd>-<b>anchor</b> <i>anchorPos</i></dd>

<dd>-<b>analysistype</b> <i>type</i></dd>

<dd>-<b>channel</b> <i>channel</i></dd>

<dd>-<b>debug</b> <i>level</i></dd>

<dd>-<b>end</b> <i>sample</i></dd>

<dd>-<b>fftlength</b> <i>length</i></dd>

<dd>-<b>fill</b> <i>color</i></dd>

<dd>-<b>frame</b> <i>boolean</i></dd>

<dd>-<b>height</b> <i>size</i></dd>

<dd>-<b>lpcorder</b> <i>n</i></dd>

<dd>-<b>maxvalue</b> <i>value</i></dd>

<dd>-<b>minvalue</b> <i>value</i></dd>

<dd>-<b>preemphasisfactor</b> <i>factor</i></dd>

<dd><b>-skip</b> <i>points</i></dd>

<dd>-<b>sound</b> <i>name</i></dd>

<dd>-<b>start</b> <i>sample</i></dd>

<dd>-<b>stipple</b> <i>value</i></dd>

<dd>-<b>tags</b> <i>tagList</i></dd>

<dd>-<b>topfrequency</b> <i>frequency</i></dd>

<dd>-<b>width</b> <i>size</i></dd>

<dd>-<b>windowtype</b> <i>type</i></dd>

<dd>-<b>winlength</b> <i>length</i></dd>
</dl>

<h3>DESCRIPTION</h3>

This command draws the FFT log power spectrum section of a sound.
The options -<b>anchor</b>, -<b>fill</b>, -<b>stipple</b>, and
-<b>tags</b> work as for other Tk canvas line items. -<b>sound</b>
specifies which sound object to link to and -<b>height</b> and
-<b>width</b> the height/width of the section. The option
<b>-fftlength</b> specifies the number of FFT points (8, 16, 32,
64, 128, 256, 512, 1024, 2048, or 4096). The default value is 512.
The option <b>-windowtype</b> is used to select windowing function,
(valid values are Hamming, Hanning, Bartlett, Blackman, or
Rectangle). The default window type is Hamming.
<b>-analysistype</b> is either <b>FFT</b> (default) or <b>LPC</b>,
for LPC analysis the order is specified using <b>-lpcorder</b>
(default 20). <b>-winlength</b> specifies the size of the window,
which should be equal to or less than the number of FFT points. The
default window length is 128. -<b>preemphasisfactor</b> is used to
specify the amount of preemphasis applied to the signal prior to
the FFT calculation (default 0.0). <b>-start</b> and <b>-end</b>
controls which part of the sound to display. -<b>topfrequency</b>
is the frequency value at the right end of the section.
-<b>maxvalue</b> and -<b>minvalue</b> specify the range (in dB)
which will be shown (default 0.0 to -80.0). Use the <b>-channel</b>
option to select which channel to show for multichannel sounds. Use
left, right, both, all, -1 (all) or a channel number counting from
0 (left). The default is to show all, i.e. to add all channels.
<b>-frame</b> specifies whether a frame will be drawn around the
spectrum section. The flag -<b>debug</b> is used to control debug
output for the item. The option takes a level argument, an integer
in the range 1-5, specifying the detail of the trace information.
<br>
See also the code examples in the widget demonstration.

<hr>
<h3><a name="waveform"></a>NAME</h3>

waveform - Waveform canvas item

<h3>SYNOPSIS</h3>

<i>pathName</i> <b>create</b> <b>waveform</b> x y ?option value
option value ...?

<h3>OPTIONS</h3>

<dl>
<dd>-<b>anchor</b> <i>anchorPos</i></dd>

<dd>-<b>channel</b> <i>channel</i></dd>

<dd>-<b>debug</b> <i>level</i></dd>

<dd>-<b>end</b> <i>sample</i></dd>

<dd>-<b>fill</b> <i>color</i></dd>

<dd>-<b>frame</b> <i>boolean</i></dd>

<dd>-<b>height</b> <i>size</i></dd>

<dd>-<b>limit</b> <i>value</i></dd>

<dd>-<b>pixelspersecond</b> <i>value</i></dd>

<dd><b>-progress</b> <i>procedure</i></dd>

<dd>-<b>shapefile</b> <i>filename</i></dd>

<dd>-<b>sound</b> <i>name</i></dd>

<dd>-<b>start</b> <i>sample</i></dd>

<dd>-<b>stipple</b> <i>bitmap</i></dd>

<dd>-<b>subsample</b> <i>value</i></dd>

<dd>-<b>tags</b> <i>tagList</i></dd>

<dd>-<b>width</b> <i>size</i></dd>

<dd>-<b>zerolevel</b> <i>boolean</i></dd>
</dl>

<h3>DESCRIPTION</h3>

This command draws the waveform of a sound. The options
-<b>anchor</b>, -<b>fill</b>, -<b>stipple</b>, and -<b>tags</b>
work as for other Tk canvas line items. -<b>sound</b> specifies
which sound object to link to and -<b>height</b> the height of the
waveform. The options <b>-start</b> and <b>-end</b> controls which
part of the sound to display. -<b>pixelspersecond</b> determines
the scaling factor in the x-direction. The <b>-width</b> option
specifies the width of the waveform. If both <b>-width</b> and
<b>-pixelspersecond</b> are specified the waveform will be cut at
one end depending on if a <b>-start</b> or <b>-end</b> option was
also given. Use the <b>-channel</b> option to select which channel
to show for multichannel sounds. Use left, right, both, all, -1
(all) or a channel number counting from 0. The default is to show
all, i.e. to add all channels. Use <b>-limit</b> to specify the
maximum shown value for the sound amplitude. <b>-zerolevel</b>
specifies whether the zero level will be displayed (default yes)
and <b>-frame</b> whether a frame will be drawn around the waveform
(default no). The -<b>subsample</b> option is useful for large
sounds to specify how precisely they should be analyzed for shape
calculation. The default value 1 uses every sample in the sound to
draw the waveform envelope, which can be slow for large sounds. A
value of 10 uses every 10th. Care should be used when specifying
this because a large value could lead to an incorrect envelope
shape. The option -<b>shapefile</b> is used to specify a file for
storing/retrieving precomputed waveform shape information. The file
specified is created if it does not already exist. If it exists it
is accessed instead of the sound data itself, thus speeding up
on-screen display. There exists two convenience routines,
snack::deleteInvalidShapeFile and snack::makeShapeFileDeleteable,
which can be used to enclose a <b>create waveform</b> statement
when using the shape file functionality. These will make sure that
shape files are handled properly, see the demo cool.tcl, for an
example of this. See the <a href="tcl-man.html#sread">read</a> command for a
description on how to use the <b>-progress</b> option. The flag
<b>-debug</b> is used to control debug output for the item. The
option takes a level argument, an integer in the range 1-5,
specifying the detail of the trace information. <br>
See also code examples in the widget demonstration.

<hr>
<a name="defpack"></a>

<h3>Standard extension packages</h3>

<p>The following packages are included in the Snack distribution or
can be downloaded separately.</p>

<p><b>sound</b></p>

<div style="margin-left: 2em">The <b>sound</b> package gives you
the <b>snack::audio, snack::filter, snack::mixer,</b> and
<b>snack::sound</b> commands. Basicly the same functions as the
<b>snack</b> package except for graphics. This is useful on some
systems if you want to use the tclsh interpreter.</div>

<p><b>snackogg</b></p>

<div style="margin-left: 2em">The <b>snackogg</b> package adds
support for the Ogg/Vorbis compressed sound file format. Ogg format
files and streams are detected automatically. Encoding is
supported. Simply use the extension .ogg when writing files or use
the option <b>-fileformat ogg</b>. When creating Ogg files the
additional options <b>-nominalbitrate</b>, <b>-maxbitrate</b>,
<b>-minbitrate</b>, and <b>-comment</b> apply.</div>

<p><b>snacksphere</b></p>

<div style="margin-left: 2em">The <b>snacksphere</b> package adds
support for reading the NIST/Sphere sound file formats. Sphere
files are detected automatically.</div>

<hr width="100%">
<br>
<a href="http://www.speech.kth.se/snack/index.html" target="_blank">Snack home</a>
</body>
</html>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				<div class="as_footer">
  
  <div class="prod_links">
    <strong>
      <a href="http://platform.activestate.com/" target="_blank">ActiveState Platform</a>&nbsp;&nbsp;
      <a href="http://www.activestate.com/downloads" target="_blank">Downloads</a>&nbsp;&nbsp;
      <a href="http://community.activestate.com/" target="_blank">Community</a>&nbsp;&nbsp;
      <a href="http://github.com/activestate/code" target="_blank">Code Recipes</a>&nbsp;&nbsp;
    </strong>
  </div>
  <div class="as_copyright"> 
    &copy; 2019 ActiveState Software Inc. All rights reserved. <strong><a href="../../trademarks/index.html">Trademarks</a>. <a href="http://www.activestate.com/privacy-policy">Privacy Policy</a>.</strong>
  </div>
</div>

			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="../../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "¶";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-20072-24', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="../../javascripts/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

