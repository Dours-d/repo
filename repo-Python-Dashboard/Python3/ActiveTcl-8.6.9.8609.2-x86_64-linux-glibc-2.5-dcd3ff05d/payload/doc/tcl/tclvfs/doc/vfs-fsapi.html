<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>ActiveTcl 8.6.9 Documentation</title>
    <meta name="generator" content="Hugo 0.26" />

    
    <meta name="description" content="Complete documentation for ActiveTcl 8.6.9">
    
    <link rel="canonical" href="vfs-fsapi.html">
    

    
    <meta name="apple-mobile-web-app-title" content="ActiveTcl 8.6.9 Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../../../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../../images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('../../../fonts/icon.eot');
        src: url('../../../fonts/icon.eot')
               format('embedded-opentype'),
             url('../../../fonts/icon.woff')
               format('woff'),
             url('../../../fonts/icon.ttf')
               format('truetype'),
             url('../../../fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../../../stylesheets/application.css">
    <link rel="stylesheet" href="../../../stylesheets/temporary.css">
    <link rel="stylesheet" href="../../../stylesheets/palettes.css">
    <link rel="stylesheet" href="../../../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open%20Sans:400,700|Source+Code+Pro">
    <style>
      body, input {
        font-family: 'Open Sans', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="../../../stylesheets/as_common.css">
    
    <link rel="stylesheet" href="../../../stylesheets/as_custom.css">
    
    <script src="../../../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-grey palette-accent-red">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="logo">
        <a href="http://www.activestate.com/">
          <img src="../../../images/logo.png" alt="ActiveState homepage">
        </a>
      </div>
      <div class="title">
        <a href="http://docs.activestate.com/">docs.activestate.com</a>
      </div>
    </div>

    

    
    
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>

</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="../../../index.html" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../../images/as_tcl.png">
        </div>
      
      <div class="name">
        <strong>ActiveTcl 8.6.9 Documentation </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  



<a  title="Get ActiveTcl" href="../../../get/index.html">
	
	Get ActiveTcl
</a>



  
    <ul>
      
        
        



<a  title="Release notes" href="../../../get/relnotes/index.html">
	
	Release notes
</a>



      
        
        



<a  title="Windows installation" href="../../../get/windows/index.html">
	
	Windows installation
</a>



      
        
        



<a  title="Linux/Unix Installaton" href="../../../get/linux/index.html">
	
	Linux/Unix Installaton
</a>



      
        
        



<a  title="macOS Installation" href="../../../get/macos/index.html">
	
	macOS Installation
</a>



      
        
        



<a  title="License" href="../../../get/license/index.html">
	
	License
</a>



      
    </ul>
  
</li>



<li>
  



<a  title="Get Started" href="../../../start/index.html">
	
	Get Started
</a>



  
    <ul>
      
        
        



<a  title="Package Reference" href="../../../pkg/index.html">
	
	Package Reference
</a>



      
        
        



<a  title="Tcl 8.6.9 docs" href="../../contents.html">
	
	Tcl 8.6.9 docs
</a>



      
    </ul>
  
</li>



<li>
  



<a  title="Contact Us" href="../../../contact/index.html">
	
	Contact Us
</a>



  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<title>vfs-fsapi - Tcl-level Virtual Filesystems</title>
<meta name='Author' content='ActiveState'>

</head>
<body>
<div class="doctools">


<hr>
[ <a
href="../toc.html">TclVFS Table Of Contents</a> | <a href=
"../index.html">TclVFS Index</a> ]

<hr>
<h1 class="title">vfs-fsapi(n) 1.0 "Tcl-level Virtual
Filesystems"</h1>

<div id="name" class="section">
<h2><a name="name">Name</a></h2>

<p>vfs-fsapi - API for the implementation of a filesystem in
Tcl</p>
</div>

<div id="toc" class="section">
<h2><a name="toc">Table Of Contents</a></h2>

<ul class="toc">
<li class="section"><a href="vfs-fsapi.html#toc">Table Of Contents</a></li>

<li class="section"><a href="vfs-fsapi.html#synopsis">Synopsis</a></li>

<li class="section"><a href="vfs-fsapi.html#section1">Description</a></li>

<li class="section"><a href="vfs-fsapi.html#section2">HANDLER OVERVIEW</a></li>

<li class="section"><a href="vfs-fsapi.html#section3">HANDLER METHODS</a></li>

<li class="section"><a href="vfs-fsapi.html#section4">HANDLER
ENVIRONMENT</a></li>

<li class="section"><a href="vfs-fsapi.html#section5">FILESYSTEM
DEBUGGING</a></li>

<li class="section"><a href="vfs-fsapi.html#see-also">See Also</a></li>

<li class="section"><a href="vfs-fsapi.html#keywords">Keywords</a></li>

<li class="section"><a href="vfs-fsapi.html#copyright">Copyright</a></li>
</ul>
</div>

<div id="synopsis" class="section">
<h2><a name="synopsis">Synopsis</a></h2>

<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.4</b></li>

<li>package require <b class="pkgname">vfs <span class=
"opt">?1.2.1?</span></b></li>
</ul>

<ul class="syntax">
<li><a href="vfs-fsapi.html#1"><b class="cmd">vfshandler</b> <i class=
"arg">subcmd</i> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">args</i>...</a></li>

<li><a href="vfs-fsapi.html#2"><b class="cmd">vfshandler</b> <b class=
"method">access</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">mode</i></a></li>

<li><a href="vfs-fsapi.html#3"><b class="cmd">vfshandler</b> <b class=
"method">createdirectory</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i></a></li>

<li><a href="vfs-fsapi.html#4"><b class="cmd">vfshandler</b> <b class=
"method">deletefile</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i></a></li>

<li><a href="vfs-fsapi.html#5"><b class="cmd">vfshandler</b> <b class=
"method">fileattributes</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <span class=
"opt">?<i class="arg">index</i>?</span> <span class="opt">?<i
class="arg">value</i>?</span></a></li>

<li><a href="vfs-fsapi.html#6"><b class="cmd">vfshandler</b> <b class=
"method">matchindirectory</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">pattern</i> <i class="arg">types</i></a></li>

<li><a href="vfs-fsapi.html#7"><b class="cmd">vfshandler</b> <b class=
"method">open</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">mode</i> <i class="arg">permissions</i></a></li>

<li><a href="vfs-fsapi.html#8"><b class="cmd">vfshandler</b> <b class=
"method">removedirectory</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">recursive</i></a></li>

<li><a href="vfs-fsapi.html#9"><b class="cmd">vfshandler</b> <b class=
"method">stat</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i></a></li>

<li><a href="vfs-fsapi.html#10"><b class="cmd">vfshandler</b> <b class=
"method">utime</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">actime</i> <i class="arg">mtime</i></a></li>

<li><a href="vfs-fsapi.html#11"><b class="cmd">vfs::accessMode</b> <i class=
"arg">mode</i></a></li>

<li><a href="vfs-fsapi.html#12"><b class="cmd">vfs::matchDirectories</b> <i
class="arg">types</i></a></li>

<li><a href="vfs-fsapi.html#13"><b class="cmd">vfs::matchFiles</b> <i class=
"arg">types</i></a></li>

<li><a href="vfs-fsapi.html#14"><b class="cmd">vfs::matchCorrectTypes</b> <i
class="arg">types</i> <i class="arg">filelist</i> <span class=
"opt">?<i class="arg">inDir</i>?</span></a></li>
</ul>
</div>
</div>

<div id="section1" class="section">
<h2><a name="section1">Description</a></h2>

<p>This document explains the API used by the package <b class=
"package"><a href="vfs.html">vfs</a></b> to communicate with
filesystem implementations written in tcl.</p>
</div>

<div id="section2" class="section">
<h2><a name="section2">HANDLER OVERVIEW</a></h2>

<p>The package <b class="package"><a href="vfs.html">vfs</a></b>
intercepts every filesystem operation which falls within a given
mount point, and passes the operation on to the mount point's <b
class="cmd">vfshandler</b> command in the interpreter which
registered it.</p>

<p>If the handler takes appropriate action for each of the cases it
is called for, a complete, perfect virtual filesystem will be
achieved, indistinguishable to Tcl from the native filesystem.
(CAVEATS: Right now <b class="package"><a href=
"vfs.html">vfs</a></b> does not expose to Tcl all the
permission-related flags of <b class="cmd">glob</b>).</p>

<dl class="definitions">
<dt><a name="1"><b class="cmd">vfshandler</b> <i class=
"arg">subcmd</i> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">args</i>...</a></dt>

<dd>
<p>The first argument specifies the operation to perform on behalf
of the filesystem code in the tcl core, the remainder specify the
file path on which to operate, in different forms, and parts, and
any additional arguments which may be required to carry out the
action.</p>

<p>To demonstrate the treatment of a path by the generic layer we
use "<b class="file">C:/foo/bar/mount.zip/xxx/yyy</b>" as an
example and additionally assume that the following conditions are
true:</p>

<ol class="enumerated">
<li>
<p>"<b class="file">mount.zip</b>" is a zip archive which has been
mounted on top of itself,</p>
</li>

<li>
<p>said zip archive contains a file with path "<b class=
"file">xxx/yyy</b>",</p>
</li>

<li>
<p>the current working directory of the application is inside of
directory "<b class="file">xxx</b>",</p>
</li>

<li>
<p>and the command executed is <b class="cmd">file exists
yyy</b>.</p>
</li>
</ol>

<p>The file separator between <i class="arg">root</i> and <i class=
"arg">relative</i> is omitted. Most filesystem operations need only
the <i class="arg">relative</i> argument for their correct
operation, but some actually require the other parts of the
path.</p>

<dl class="definitions">
<dt><i class="arg">subcmd</i></dt>

<dd>
<p>This argument of the handler can be one of the following <b
class="method">access</b>, <b class="method">createdirectory</b>,
<b class="method">deletefile</b>, <b class=
"method">fileattributes</b>, <b class=
"method">matchindirectory</b>, <b class="method">open</b>, <b
class="method">removedirectory</b>, <b class="method">stat</b>, or
<b class="method">utime</b>.</p>

<p>The generic layer expects that the subcommands of a handler
signal error conditions by calling <b class="cmd">vfs::filesystem
posixerror</b> with the appropriate posix error code instead of
throwing a tcl error. If the latter is done nevertheless it will be
treated as an unknown posix error.</p>

<p>There are three exceptions to the rule above: If any of <b
class="method">open</b> (when an interpreter is given), <b class=
"method">matchindirectory</b>, and <b class=
"method">fileattributes</b> (for a set or get operation only) throw
a tcl error, this error will be passed up to the caller of the
filesystem command which invoked the handler. Note that this does
not preclude the ability of these subcommands to use the command <b
class="cmd">vfs::filesystem posixerror</b> to report more regular
filesystem errors.</p>
</dd>

<dt><i class="arg">root</i></dt>

<dd>
<p>Part of the specification of the path to operate upon. It
contains the part of the path which lies outside this filesystem's
mount point. For example outlined above its value will be "<b
class="file">C:/foo/bar/mount.zip</b>".</p>
</dd>

<dt><i class="arg">relative</i></dt>

<dd>
<p>Part of the specification of the path to operate upon. It
contains the part of the path which lies inside this filesystem.
For example outlined above its value will be "<b class=
"file">xxx/yyy</b>".</p>
</dd>

<dt><i class="arg">actualpath</i></dt>

<dd>
<p>Part of the specification of the path to operate upon. It
contains the original (unnormalized) name of the path which was
used in the current command wherever it originated (in Tcl or C).
For example outlined above its value will be "<b class=
"file">yyy</b>".</p>
</dd>
</dl>
</dd>
</dl>
</div>

<div id="section3" class="section">
<h2><a name="section3">HANDLER METHODS</a></h2>

<dl class="definitions">
<dt><a name="2"><b class="cmd">vfshandler</b> <b class=
"method">access</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">mode</i></a></dt>

<dd>
<p>Signal a posix error if the specified access <i class=
"arg">mode</i> (an integer number) is not compatible with the file
or directory described by the path. The generic layer will ignore
any non-empty return value.</p>

<p>The command <b class="cmd">vfs::accessMode</b> (see section
<span class="sectref"><a href="vfs-fsapi.html#section4">HANDLER
ENVIRONMENT</a></span>) can be used to convert the integer <i
class="arg">mode</i> into an easier to check string value.</p>
</dd>

<dt><a name="3"><b class="cmd">vfshandler</b> <b class=
"method">createdirectory</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i></a></dt>

<dd>
<p>Create a directory with the given name. The command can assume
that all sub-directories in the path exist and are valid, and that
the actual desired path does not yet exist (Tcl takes care of all
of that for us).</p>
</dd>

<dt><a name="4"><b class="cmd">vfshandler</b> <b class=
"method">deletefile</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i></a></dt>

<dd>
<p>Delete the given file.</p>
</dd>

<dt><a name="5"><b class="cmd">vfshandler</b> <b class=
"method">fileattributes</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <span class=
"opt">?<i class="arg">index</i>?</span> <span class="opt">?<i
class="arg">value</i>?</span></a></dt>

<dd>
<p>The command has to return a list containing the names of all
acceptable attributes, if neither <i class="arg">index</i> nor <i
class="arg">value</i> were specified.</p>

<p>The command has to return the value of the <i class=
"arg">index</i>'th attribute if the <i class="arg">index</i> is
specified, but not the <i class="arg">value</i>. The attributes are
counted in the same order as their names appear in the list
returned by a call where neither <i class="arg">index</i> nor <i
class="arg">value</i> were specified. The first attribute is has
the index <b class="const">0</b>.</p>

<p>The command has to set the value of the <i class=
"arg">index</i>'th attribute to <i class="arg">value</i> if both <i
class="arg">index</i> and <i class="arg">value</i> were specified
for the call.</p>
</dd>

<dt><a name="6"><b class="cmd">vfshandler</b> <b class=
"method">matchindirectory</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">pattern</i> <i class="arg">types</i></a></dt>

<dd>
<p>Return the list of files or directories in the given path which
match the glob <i class="arg">pattern</i> and are compatible with
the specified list of <i class="arg">types</i>. The specified path
is always the name of an existing directory.</p>

<p><em>Note:</em> As Tcl generates requests for directory-only
matches from the filesystems involved when performing any type of
recursive globbing this subcommand absolutely has to handle such
(and file-only) requests correctly or bad things (TM) will
happen.</p>

<p>The commands <b class="cmd">vfs::matchDirectories</b> and <b
class="cmd">vfs::matchFiles</b> (see section <span class=
"sectref"><a href="vfs-fsapi.html#section4">HANDLER ENVIRONMENT</a></span>) can
aid the implementation greatly in this task.</p>
</dd>

<dt><a name="7"><b class="cmd">vfshandler</b> <b class=
"method">open</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">mode</i> <i class="arg">permissions</i></a></dt>

<dd>
<p>Either returns a list describing the successfully opened file,
or throws an error describing how the operation failed.</p>

<p>The list returned upon success contains at least one and at most
two elements. The first, obligatory, element is always the handle
of the channel which was created to allow access to the contents of
the file.</p>

<p>If specified the second element will be interpreted as a
callback, i.e. a command prefix. This prefix will always be
executed as is, i.e. without additional arguments. Any required
arguments have to be returned as part of the result of the call to
<b class="method">open</b>.</p>

<p>If present the specified callback will be evaluated just before
the channel is closed <em>by the generic filesystem layer</em>. The
callback itself <em>must not</em> call <b class=
"cmd">close</b>.</p>

<p>The channel however is live enough to allow <b class=
"cmd">seek</b> and <b class="cmd">read</b> operations. In addition
all available data will have been flushed into it already. This
means, for example, that the callback can seek to the beginning of
the said channel, read its contents and then store the gathered
data elsewhere. In other words, this callback is not only crucial
to the cleanup of any resources associated with an opened file, but
also for the ability to implement a filesystem which can be written
to.</p>

<p>Under normal circumstances return code and any errors thrown by
the callback itself are ignored. In that case errors have to be
signaled asychronously, for example by calling <b class=
"cmd">bgerror</b>. However if, through a call of the subcommand <b
class="method">internalerror</b>, an error handling script has been
specified for the file system, all errors thrown here will be
passed to that script for further action.</p>

<dl class="definitions">
<dt><i class="arg">mode</i></dt>

<dd>
<p>can be any of <b class="const">r</b>, <b class="const">w</b>, <b
class="const">a</b>, <b class="const">w+</b>, or <b class=
"const">a+</b>.</p>
</dd>

<dt><i class="arg">permissions</i></dt>

<dd>
<p>determines the native mode the openend file is created with.
Relevant only of the open <i class="arg">mode</i> actually requests
the creation of a non-existing file, i.e. is not <b class=
"const">r</b>.</p>
</dd>
</dl>
</dd>

<dt><a name="8"><b class="cmd">vfshandler</b> <b class=
"method">removedirectory</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">recursive</i></a></dt>

<dd>
<p>Delete the given directory. Argument <i class=
"arg">recursive</i> is a boolean. If the specified value is <b
class="const">true</b> then even if the directory is non-empty, an
attempt has to be made to recursively delete it and its contents.
If the spcified value is <b class="const">false</b> and the
directory is non-empty, a posix error (<b class="const">EEXIST</b>)
has to be thrown.</p>
</dd>

<dt><a name="9"><b class="cmd">vfshandler</b> <b class=
"method">stat</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i></a></dt>

<dd>
<p>The result has to be a list of keys and values, in a format
acceptable to the builtin command <b class="cmd">array set</b>. It
describes the contents of a stat structure. The order of the keys
in the list is not important.</p>

<p>Given this the subcommand should use something like</p>

<pre class="example">
return [list dev 0 type file mtime 1234 ...].
</pre>

<p>as the last command of its implementation.</p>

<p>The following keys and their values have to be supplied by the
filesystem:</p>

<dl class="definitions">
<dt><b class="const">dev</b></dt>

<dd>
<p>A long integer number, the device number of the path stat was
called for.</p>
</dd>

<dt><b class="const">ino</b></dt>

<dd>
<p>A long integer number, the inode number of the path stat was
called for. Each path handled by the filesystem should be uniquely
identified by the combination of device and inode number. Violating
this principle will cause higher-level algorithms which(have to)
keep track of device and inode information to fail in all manners
possible.</p>

<p>An example of such an algorithm would be a directory walker
using device/inode information to keep itself out of infinite loops
generated through symbolic links. Returning non-unique device/inode
information will most likely cause such a walker to skip over paths
under the wrong assumption of having them seen already.</p>
</dd>

<dt><b class="const">mode</b></dt>

<dd>
<p>An integer number, the access mode of the path. It is this mode
which is checked by the subcommand <b class=
"method">access</b>.</p>
</dd>

<dt><b class="const">nlink</b></dt>

<dd>
<p>A long integer number, the number of hard links to the specified
path.</p>
</dd>

<dt><b class="const">uid</b></dt>

<dd>
<p>A long integer number, the id of the user owning the virtual
path.</p>
</dd>

<dt><b class="const">gid</b></dt>

<dd>
<p>A long integer number, the id of the user group the virtual path
belongs to.</p>
</dd>

<dt><b class="const">size</b></dt>

<dd>
<p>A long integer number, the true size of the virtual path, in
bytes.</p>
</dd>

<dt><b class="const">atime</b></dt>

<dd>
<p>A long integer number, the time of the latest access to the
path, in seconds since the epoch. Convertible into a readable
date/time by the command <b class="cmd">clock format</b>.</p>
</dd>

<dt><b class="const">mtime</b></dt>

<dd>
<p>A long integer number, the time of the latest modification of
the path, in seconds since the epoch. Convertible into a readable
date/time by the command <b class="cmd">clock format</b>.</p>
</dd>

<dt><b class="const">ctime</b></dt>

<dd>
<p>A long integer number, the time of the path was created, in
seconds since the epoch. Convertible into a readable date/time by
the command <b class="cmd">clock format</b>.</p>
</dd>

<dt><b class="const">type</b></dt>

<dd>
<p>A string, either <b class="const">directory</b>, or <b class=
"const">file</b>, describing the type of the given path.</p>
</dd>
</dl>
</dd>

<dt><a name="10"><b class="cmd">vfshandler</b> <b class=
"method">utime</b> <i class="arg">root</i> <i class=
"arg">relative</i> <i class="arg">actualpath</i> <i class=
"arg">actime</i> <i class="arg">mtime</i></a></dt>

<dd>
<p>Set the access and modification times of the given file (these
are read with <b class="method">stat</b>).</p>
</dd>
</dl>
</div>

<div id="section4" class="section">
<h2><a name="section4">HANDLER ENVIRONMENT</a></h2>

<p>The implementation of a filesystem handler can rely on the
existence of the following utility commands:</p>

<dl class="definitions">
<dt><a name="11"><b class="cmd">vfs::accessMode</b> <i class=
"arg">mode</i></a></dt>

<dd>
<p>This commands converts an access <i class="arg">mode</i> given
as integer into a string, one of <b class="const">F</b>, <b class=
"const">X</b>, <b class="const">W</b>, <b class="const">XW</b>, <b
class="const">R</b>, <b class="const">RX</b>, and <b class=
"const">RW</b>.</p>
</dd>

<dt><a name="12"><b class="cmd">vfs::matchDirectories</b> <i class=
"arg">types</i></a></dt>

<dd>
<p>Checks if the glob types specification ask for the inclusion of
directories. Returns a boolean result. <b class="const">true</b> is
returned if types does ask for directories, else <b class=
"const">false</b>.</p>
</dd>

<dt><a name="13"><b class="cmd">vfs::matchFiles</b> <i class=
"arg">types</i></a></dt>

<dd>
<p>Checks if the glob types specification ask for the inclusion of
files. Returns a boolean result. <b class="const">true</b> is
returned if types does ask for directories, else <b class=
"const">false</b>.</p>
</dd>

<dt><a name="14"><b class="cmd">vfs::matchCorrectTypes</b> <i
class="arg">types</i> <i class="arg">filelist</i> <span class=
"opt">?<i class="arg">inDir</i>?</span></a></dt>

<dd>
<p>Returns that subset of the <i class="arg">filelist</i> which are
compatible with the <i class="arg">types</i> given. The elements of
<i class="arg">filelist</i> are either absolute paths, or names of
files in the directory <i class="arg">indir</i>. The latter
interpretation is taken if and only if the argument <i class=
"arg">indir</i> is specified.</p>
</dd>
</dl>
</div>

<div id="section5" class="section">
<h2><a name="section5">FILESYSTEM DEBUGGING</a></h2>

<p>To debug a problem in the implementation of a filesystem use
code as shown below. This registers the command <b class=
"cmd">report</b> as the error handler for the filesystem, which in
turn prints out the error stack provided by tcl.</p>

<pre class="example">
vfs::filesystem internalerror report
proc report {} {
    puts stderr $::errorInfo
}
</pre>
</div>

<div id="see-also" class="section">
<h2><a name="see-also">See Also</a></h2>

<p><a href="vfs.html">vfs</a>, <a href=
"vfs-filesystems.html">vfs-filesystems</a></p>
</div>

<div id="keywords" class="section">
<h2><a name="keywords">Keywords</a></h2>

<p><a href="../index.html#key0">file</a>, <a href=
"../index.html#key1">filesystem</a>, <a href=
"../index.html#key7">vfs</a></p>
</div>

<div id="copyright" class="section">
<h2><a name="copyright">Copyright</a></h2>

<p>Copyright &copy; 2001-2003 Vince Darley
&lt;vincentdarley@users.sourceforge.net&gt;<br>
Copyright &copy; 2003 Andreas Kupries
&lt;andreas_kupries@users.sourceforge.net&gt;</p>
</div>

<h4>Copyright &copy; 2015 <a href="http://www.activestate.com">for
compilation: ActiveState</a></h4>
</div>
</body>
</html>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				<div class="as_footer">
  
  <div class="prod_links">
    <strong>
      <a href="http://platform.activestate.com/" target="_blank">ActiveState Platform</a>&nbsp;&nbsp;
      <a href="http://www.activestate.com/downloads" target="_blank">Downloads</a>&nbsp;&nbsp;
      <a href="http://community.activestate.com/" target="_blank">Community</a>&nbsp;&nbsp;
      <a href="http://github.com/activestate/code" target="_blank">Code Recipes</a>&nbsp;&nbsp;
    </strong>
  </div>
  <div class="as_copyright"> 
    &copy; 2019 ActiveState Software Inc. All rights reserved. <strong><a href="../../../trademarks/index.html">Trademarks</a>. <a href="http://www.activestate.com/privacy-policy">Privacy Policy</a>.</strong>
  </div>
</div>

			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="../../../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "¶";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-20072-24', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="../../../javascripts/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

