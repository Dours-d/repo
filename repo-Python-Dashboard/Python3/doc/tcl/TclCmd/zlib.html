<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>ActiveTcl 8.6.9 Documentation</title>
    <meta name="generator" content="Hugo 0.26" />

    
    <meta name="description" content="Complete documentation for ActiveTcl 8.6.9">
    
    <link rel="canonical" href="zlib.html">
    

    
    <meta name="apple-mobile-web-app-title" content="ActiveTcl 8.6.9 Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('../../fonts/icon.eot');
        src: url('../../fonts/icon.eot')
               format('embedded-opentype'),
             url('../../fonts/icon.woff')
               format('woff'),
             url('../../fonts/icon.ttf')
               format('truetype'),
             url('../../fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../../stylesheets/application.css">
    <link rel="stylesheet" href="../../stylesheets/temporary.css">
    <link rel="stylesheet" href="../../stylesheets/palettes.css">
    <link rel="stylesheet" href="../../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open%20Sans:400,700|Source+Code+Pro">
    <style>
      body, input {
        font-family: 'Open Sans', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="../../stylesheets/as_common.css">
    
    <link rel="stylesheet" href="../../stylesheets/as_custom.css">
    
    <script src="../../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-grey palette-accent-red">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="logo">
        <a href="http://www.activestate.com/">
          <img src="../../images/logo.png" alt="ActiveState homepage">
        </a>
      </div>
      <div class="title">
        <a href="http://docs.activestate.com/">docs.activestate.com</a>
      </div>
    </div>

    

    
    
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>

</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="../../index.html" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../images/as_tcl.png">
        </div>
      
      <div class="name">
        <strong>ActiveTcl 8.6.9 Documentation </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  



<a  title="Get ActiveTcl" href="../../get/index.html">
	
	Get ActiveTcl
</a>



  
    <ul>
      
        
        



<a  title="Release notes" href="../../get/relnotes/index.html">
	
	Release notes
</a>



      
        
        



<a  title="Windows installation" href="../../get/windows/index.html">
	
	Windows installation
</a>



      
        
        



<a  title="Linux/Unix Installaton" href="../../get/linux/index.html">
	
	Linux/Unix Installaton
</a>



      
        
        



<a  title="macOS Installation" href="../../get/macos/index.html">
	
	macOS Installation
</a>



      
        
        



<a  title="License" href="../../get/license/index.html">
	
	License
</a>



      
    </ul>
  
</li>



<li>
  



<a  title="Get Started" href="../../start/index.html">
	
	Get Started
</a>



  
    <ul>
      
        
        



<a  title="Package Reference" href="../../pkg/index.html">
	
	Package Reference
</a>



      
        
        



<a  title="Tcl 8.6.9 docs" href="../contents.html">
	
	Tcl 8.6.9 docs
</a>



      
    </ul>
  
</li>



<li>
  



<a  title="Contact Us" href="../../contact/index.html">
	
	Contact Us
</a>



  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD><TITLE>zlib manual page - Tcl Built-In Commands</TITLE>
<link rel="stylesheet" href="../docs.css" type="text/css" media="all">
</HEAD>
<BODY><H2><a href="../contents.html">Tcl8.6.9/Tk8.6.9 Documentation</a> <small>&gt;</small> <a href="contents.html">Tcl Commands, version 8.6.9</a> <small>&gt;</small> zlib</H2>
<H3><A HREF="../UserCmd/contents.html">Tcl/Tk Applications</A> | <A HREF="contents.html">Tcl Commands</A> | <A HREF="../TkCmd/contents.html">Tk Commands</A> | <A HREF="../ItclCmd/contents.html">[incr Tcl] Package Commands</A> | <A HREF="../SqliteCmd/contents.html">SQLite3 Package Commands</A> | <A HREF="../TdbcCmd/contents.html">TDBC Package Commands</A> | <A HREF="../TdbcmysqlCmd/contents.html">tdbc::mysql Package Commands</A> | <A HREF="../TdbcodbcCmd/contents.html">tdbc::odbc Package Commands</A> | <A HREF="../TdbcpostgresCmd/contents.html">tdbc::postgres Package Commands</A> | <A HREF="../TdbcsqliteCmd/contents.html">tdbc::sqlite3 Package Commands</A> | <A HREF="../ThreadCmd/contents.html">Thread Package Commands</A> | <A HREF="../TclLib/contents.html">Tcl C API</A> | <A HREF="../TkLib/contents.html">Tk C API</A> | <A HREF="../ItclLib/contents.html">[incr Tcl] Package C API</A> | <A HREF="../TdbcLib/contents.html">TDBC Package C API</A></H3>
<DL>
<DD><A HREF="zlib.html#M2" NAME="L2228">NAME</A>
<DL><DD>zlib &mdash; compression and decompression operations</DD></DL>
<DD><A HREF="zlib.html#M3" NAME="L2229">SYNOPSIS</A>
<DL>
</DL>
<DD><A HREF="zlib.html#M4" NAME="L2230">DESCRIPTION</A>
<DD><A HREF="zlib.html#M5" NAME="L2231">COMPRESSION SUBCOMMANDS</A>
<DL class="compression subcommands">
<DD><A HREF="zlib.html#M6" NAME="L2232"><B>zlib compress</B><I> string</I> ?<I>level</I>?</A>
<DD><A HREF="zlib.html#M7" NAME="L2233"><B>zlib decompress</B><I> string</I> ?<I>bufferSize</I>?</A>
<DD><A HREF="zlib.html#M8" NAME="L2234"><B>zlib deflate</B><I> string</I> ?<I>level</I>?</A>
<DD><A HREF="zlib.html#M9" NAME="L2235"><B>zlib gunzip</B><I> string</I> ?<B>-headerVar </B><I>varName</I>?</A>
<DL class="compression subcommands">
<DD><A HREF="zlib.html#M10" NAME="L2236"><B>comment</B></A>
<DD><A HREF="zlib.html#M11" NAME="L2237"><B>crc</B></A>
<DD><A HREF="zlib.html#M12" NAME="L2238"><B>filename</B></A>
<DD><A HREF="zlib.html#M13" NAME="L2239"><B>os</B></A>
<DD><A HREF="zlib.html#M14" NAME="L2240"><B>size</B></A>
<DD><A HREF="zlib.html#M15" NAME="L2241"><B>time</B></A>
<DD><A HREF="zlib.html#M16" NAME="L2242"><B>type</B></A>
</DL>
<DD><A HREF="zlib.html#M17" NAME="L2243"><B>zlib gzip</B><I> string</I> ?<B>-level </B><I>level</I>? ?<B>-header </B><I>dict</I>?</A>
<DL class="compression subcommands">
<DD><A HREF="zlib.html#M18" NAME="L2244"><B>comment</B></A>
<DD><A HREF="zlib.html#M19" NAME="L2245"><B>crc</B></A>
<DD><A HREF="zlib.html#M20" NAME="L2246"><B>filename</B></A>
<DD><A HREF="zlib.html#M21" NAME="L2247"><B>os</B></A>
<DD><A HREF="zlib.html#M22" NAME="L2248"><B>time</B></A>
<DD><A HREF="zlib.html#M23" NAME="L2249"><B>type</B></A>
</DL>
<DD><A HREF="zlib.html#M24" NAME="L2250"><B>zlib inflate</B><I> string</I> ?<I>bufferSize</I>?</A>
</DL>
<DD><A HREF="zlib.html#M25" NAME="L2251">CHANNEL SUBCOMMAND</A>
<DL class="channel subcommand">
<DD><A HREF="zlib.html#M26" NAME="L2252"><B>zlib push</B><I> mode channel</I> ?<I>options ...</I>?</A>
<DL class="channel subcommand">
<DD><A HREF="zlib.html#M27" NAME="L2253"><B>compress</B></A>
<DD><A HREF="zlib.html#M28" NAME="L2254"><B>decompress</B></A>
<DD><A HREF="zlib.html#M29" NAME="L2255"><B>deflate</B></A>
<DD><A HREF="zlib.html#M30" NAME="L2256"><B>gunzip</B></A>
<DD><A HREF="zlib.html#M31" NAME="L2257"><B>gzip</B></A>
<DD><A HREF="zlib.html#M32" NAME="L2258"><B>inflate</B></A>
</DL>
<DL class="channel subcommand">
<DD><A HREF="zlib.html#M33" NAME="L2259"><B>-dictionary</B><I> binData</I></A>
<DD><A HREF="zlib.html#M34" NAME="L2260"><B>-header</B><I> dictionary</I></A>
<DD><A HREF="zlib.html#M35" NAME="L2261"><B>-level</B><I> compressionLevel</I></A>
<DD><A HREF="zlib.html#M36" NAME="L2262"><B>-limit</B><I> readaheadLimit</I></A>
</DL>
<DL class="channel subcommand">
<DD><A HREF="zlib.html#M37" NAME="L2263"><B>-checksum</B><I> checksum</I></A>
<DD><A HREF="zlib.html#M38" NAME="L2264"><B>-dictionary</B><I> binData</I></A>
<DD><A HREF="zlib.html#M39" NAME="L2265"><B>-flush</B><I> type</I></A>
<DD><A HREF="zlib.html#M40" NAME="L2266"><B>-header</B><I> dictionary</I></A>
<DD><A HREF="zlib.html#M41" NAME="L2267"><B>-limit</B><I> readaheadLimit</I></A>
</DL>
</DL>
<DD><A HREF="zlib.html#M42" NAME="L2268">STREAMING SUBCOMMAND</A>
<DL class="streaming subcommand">
<DD><A HREF="zlib.html#M43" NAME="L2269"><B>zlib stream</B><I> mode</I> ?<I>options</I>?</A>
<DL class="streaming subcommand">
<DD><A HREF="zlib.html#M44" NAME="L2270"><B>zlib stream compress</B> ?<B>-dictionary </B><I>bindata</I>? ?<B>-level </B><I>level</I>?</A>
<DD><A HREF="zlib.html#M45" NAME="L2271"><B>zlib stream decompress</B> ?<B>-dictionary </B><I>bindata</I>?</A>
<DD><A HREF="zlib.html#M46" NAME="L2272"><B>zlib stream deflate</B> ?<B>-dictionary </B><I>bindata</I>? ?<B>-level </B><I>level</I>?</A>
<DD><A HREF="zlib.html#M47" NAME="L2273"><B>zlib stream gunzip</B></A>
<DD><A HREF="zlib.html#M48" NAME="L2274"><B>zlib stream gzip</B> ?<B>-header </B><I>header</I>? ?<B>-level </B><I>level</I>?</A>
<DD><A HREF="zlib.html#M49" NAME="L2275"><B>zlib stream inflate</B> ?<B>-dictionary </B><I>bindata</I>?</A>
</DL>
</DL>
<DD><A HREF="zlib.html#M50" NAME="L2276">CHECKSUMMING SUBCOMMANDS</A>
<DL class="checksumming subcommands">
<DD><A HREF="zlib.html#M51" NAME="L2277"><B>zlib adler32</B><I> string</I> ?<I>initValue</I>?</A>
<DD><A HREF="zlib.html#M52" NAME="L2278"><B>zlib crc32</B><I> string</I> ?<I>initValue</I>?</A>
</DL>
<DD><A HREF="zlib.html#M53" NAME="L2279">STREAMING INSTANCE COMMAND</A>
<DL class="streaming instance command">
<DD><A HREF="zlib.html#M54" NAME="L2280"><I>stream </I><B>add</B> ?<I>option...</I>? <I>data</I></A>
<DD><A HREF="zlib.html#M55" NAME="L2281"><I>stream </I><B>checksum</B></A>
<DD><A HREF="zlib.html#M56" NAME="L2282"><I>stream </I><B>close</B></A>
<DD><A HREF="zlib.html#M57" NAME="L2283"><I>stream </I><B>eof</B></A>
<DD><A HREF="zlib.html#M58" NAME="L2284"><I>stream </I><B>finalize</B></A>
<DD><A HREF="zlib.html#M59" NAME="L2285"><I>stream </I><B>flush</B></A>
<DD><A HREF="zlib.html#M60" NAME="L2286"><I>stream </I><B>fullflush</B></A>
<DD><A HREF="zlib.html#M61" NAME="L2287"><I>stream </I><B>get </B>?<I>count</I>?</A>
<DD><A HREF="zlib.html#M62" NAME="L2288"><I>stream </I><B>put</B> ?<I>option...</I>? <I>data</I></A>
<DL class="streaming instance command">
<DD><A HREF="zlib.html#M63" NAME="L2289"><B>-dictionary</B><I> binData</I></A>
<DD><A HREF="zlib.html#M64" NAME="L2290"><B>-finalize</B></A>
<DD><A HREF="zlib.html#M65" NAME="L2291"><B>-flush</B></A>
<DD><A HREF="zlib.html#M66" NAME="L2292"><B>-fullflush</B></A>
</DL>
<DD><A HREF="zlib.html#M67" NAME="L2293"><I>stream </I><B>reset</B></A>
</DL>
<DD><A HREF="zlib.html#M68" NAME="L2294">EXAMPLES</A>
<DD><A HREF="zlib.html#M69" NAME="L2295">SEE ALSO</A>
<DD><A HREF="zlib.html#M70" NAME="L2296">KEYWORDS</A>
</DL>
<H3><A NAME="M2">NAME</A></H3>
zlib &mdash; compression and decompression operations
<H3><A NAME="M3">SYNOPSIS</A></H3>
<B>zlib </B><I>subcommand arg ...</I><BR>
<H3><A NAME="M4">DESCRIPTION</A></H3>
The <B>zlib</B> command provides access to the compression and check-summing
facilities of the Zlib library by Jean-loup Gailly and Mark Adler. It has the
following subcommands.
<H4><A NAME="M5">COMPRESSION SUBCOMMANDS</A></H4>
<DL class="compression subcommands">
<DT><A NAME="M6"><B>zlib compress</B><I> string</I> ?<I>level</I>?</A><DD>
Returns the zlib-format compressed binary data of the binary string in
<I>string</I>. If present, <I>level</I> gives the compression level to use (from
0, which is uncompressed, to 9, maximally compressed).
<P><DT><A NAME="M7"><B>zlib decompress</B><I> string</I> ?<I>bufferSize</I>?</A><DD>
Returns the uncompressed version of the raw compressed binary data in
<I>string</I>. If present, <I>bufferSize</I> is a hint as to what size of buffer
is to be used to receive the data.
<P><DT><A NAME="M8"><B>zlib deflate</B><I> string</I> ?<I>level</I>?</A><DD>
Returns the raw compressed binary data of the binary string in <I>string</I>.
If present, <I>level</I> gives the compression level to use (from 0, which is
uncompressed, to 9, maximally compressed).
<P><DT><A NAME="M9"><B>zlib gunzip</B><I> string</I> ?<B>-headerVar </B><I>varName</I>?</A><DD>
Return the uncompressed contents of binary string <I>string</I>, which must
have been in gzip format. If <B>-headerVar</B> is given, store a dictionary
describing the contents of the gzip header in the variable called
<I>varName</I>. The keys of the dictionary that may be present are:
<P>
<DL class="compression subcommands">
<DT><A NAME="M10"><B>comment</B></A><DD>
The comment field from the header, if present.
<P><DT><A NAME="M11"><B>crc</B></A><DD>
A boolean value describing whether a CRC of the header is computed.
<P><DT><A NAME="M12"><B>filename</B></A><DD>
The filename field from the header, if present.
<P><DT><A NAME="M13"><B>os</B></A><DD>
The operating system type code field from the header (if not the
QW unknown
value). See RFC 1952 for the meaning of these codes.
<P><DT><A NAME="M14"><B>size</B></A><DD>
The size of the uncompressed data.
<P><DT><A NAME="M15"><B>time</B></A><DD>
The time field from the header if non-zero, expected to be time that the file
named by the <B>filename</B> field was modified. Suitable for use with
<B><A HREF="clock.html">clock format</A></B>.
<P><DT><A NAME="M16"><B>type</B></A><DD>
The type of the uncompressed data (<B>binary</B> or <B>text</B>) if known.
<P></DL>
<P><DT><A NAME="M17"><B>zlib gzip</B><I> string</I> ?<B>-level </B><I>level</I>? ?<B>-header </B><I>dict</I>?</A><DD>
Return the compressed contents of binary string <I>string</I> in gzip format.
If <B>-level</B> is given, <I>level</I> gives the compression level to use
(from 0, which is uncompressed, to 9, maximally compressed). If <B>-header</B>
is given, <I>dict</I> is a dictionary containing values used for the gzip
header. The following keys may be defined:
<P>
<DL class="compression subcommands">
<DT><A NAME="M18"><B>comment</B></A><DD>
Add the given comment to the header of the gzip-format data.
<P><DT><A NAME="M19"><B>crc</B></A><DD>
A boolean saying whether to compute a CRC of the header. Note that if the data
is to be interchanged with the <B>gzip</B> program, a header CRC should
<I>not</I> be computed.
<P><DT><A NAME="M20"><B>filename</B></A><DD>
The name of the file that the data to be compressed came from.
<P><DT><A NAME="M21"><B>os</B></A><DD>
The operating system type code, which should be one of the values described in
RFC 1952.
<P><DT><A NAME="M22"><B>time</B></A><DD>
The time that the file named in the <B>filename</B> key was last modified. This
will be in the same as is returned by <B><A HREF="clock.html">clock seconds</A></B> or <B><A HREF="file.html">file mtime</A></B>.
<P><DT><A NAME="M23"><B>type</B></A><DD>
The type of the data being compressed, being <B>binary</B> or <B>text</B>.
<P></DL>
<P><DT><A NAME="M24"><B>zlib inflate</B><I> string</I> ?<I>bufferSize</I>?</A><DD>
Returns the uncompressed version of the raw compressed binary data in
<I>string</I>. If present, <I>bufferSize</I> is a hint as to what size of buffer
is to be used to receive the data.
<P></DL>
<H4><A NAME="M25">CHANNEL SUBCOMMAND</A></H4>
<DL class="channel subcommand">
<DT><A NAME="M26"><B>zlib push</B><I> mode channel</I> ?<I>options ...</I>?</A><DD>
Pushes a compressing or decompressing transformation onto the channel
<I>channel</I>.
The transformation can be removed again with <B><A HREF="chan.html">chan pop</A></B>.
The <I>mode</I> argument determines what type of transformation
is pushed; the following are supported:
<P>
<DL class="channel subcommand">
<DT><A NAME="M27"><B>compress</B></A><DD>
The transformation will be a compressing transformation that produces
zlib-format data on <I>channel</I>, which must be writable.
<P><DT><A NAME="M28"><B>decompress</B></A><DD>
The transformation will be a decompressing transformation that reads
zlib-format data from <I>channel</I>, which must be readable.
<P><DT><A NAME="M29"><B>deflate</B></A><DD>
The transformation will be a compressing transformation that produces raw
compressed data on <I>channel</I>, which must be writable.
<P><DT><A NAME="M30"><B>gunzip</B></A><DD>
The transformation will be a decompressing transformation that reads
gzip-format data from <I>channel</I>, which must be readable.
<P><DT><A NAME="M31"><B>gzip</B></A><DD>
The transformation will be a compressing transformation that produces
gzip-format data on <I>channel</I>, which must be writable.
<P><DT><A NAME="M32"><B>inflate</B></A><DD>
The transformation will be a decompressing transformation that reads raw
compressed data from <I>channel</I>, which must be readable.
<P></DL>
<DL><DD>
<P>
The following options may be set when creating a transformation via
the
&#8220;<I>options ...</I>&#8221;
to the <B>zlib push</B> command:
<P>
<DL class="channel subcommand">
<DT><A NAME="M33"><B>-dictionary</B><I> binData</I></A><DD>
Sets the compression dictionary to use when working with compressing or
decompressing the data to be <I>binData</I>. Not valid for transformations that
work with gzip-format data.  The dictionary should consist of strings (byte
sequences) that are likely to be encountered later in the data to be compressed,
with the most commonly used strings preferably put towards the end of the
dictionary. Tcl provides no mechanism for choosing a good such dictionary for
a particular data sequence.
<P><DT><A NAME="M34"><B>-header</B><I> dictionary</I></A><DD>
Passes a description of the gzip header to create, in the same format that
<B>zlib gzip</B> understands.
<P><DT><A NAME="M35"><B>-level</B><I> compressionLevel</I></A><DD>
How hard to compress the data. Must be an integer from 0 (uncompressed) to 9
(maximally compressed).
<P><DT><A NAME="M36"><B>-limit</B><I> readaheadLimit</I></A><DD>
The maximum number of bytes ahead to read when decompressing. This defaults to
1, which ensures that data is always decompressed correctly, but may be
increased to improve performance. This is more useful when the channel is
non-blocking.
<P></DL>
<P>
Both compressing and decompressing channel transformations add extra
configuration options that may be accessed through <B><A HREF="chan.html">chan configure</A></B>. The
options are:
<P>
<DL class="channel subcommand">
<DT><A NAME="M37"><B>-checksum</B><I> checksum</I></A><DD>
This read-only option gets the current checksum for the uncompressed data that
the compression engine has seen so far. It is valid for both compressing and
decompressing transforms, but not for the raw inflate and deflate formats. The
compression algorithm depends on what format is being produced or consumed.
<P><DT><A NAME="M38"><B>-dictionary</B><I> binData</I></A><DD>
This read-write options gets or sets the initial compression dictionary to use
when working with compressing or decompressing the data to be <I>binData</I>.
It is not valid for transformations that work with gzip-format data, and should
not normally be set on compressing transformations other than at the point where
the transformation is stacked. Note that this cannot be used to get the
current active compression dictionary mid-stream, as that information is not
exposed by the underlying library.
<P><DT><A NAME="M39"><B>-flush</B><I> type</I></A><DD>
This write-only operation flushes the current state of the compressor to the
underlying channel. It is only valid for compressing transformations. The
<I>type</I> must be either <B>sync</B> or <B>full</B> for a normal flush or an
expensive flush respectively. Flushing degrades the compression ratio, but
makes it easier for a decompressor to recover more of the file in the case of
data corruption.
<P><DT><A NAME="M40"><B>-header</B><I> dictionary</I></A><DD>
This read-only option, only valid for decompressing transforms that are
processing gzip-format data, returns the dictionary describing the header read
off the data stream.
<P><DT><A NAME="M41"><B>-limit</B><I> readaheadLimit</I></A><DD>
This read-write option is used by decompressing channels to control the
maximum number of bytes ahead to read from the underlying data source. This
defaults to 1, which ensures that data is always decompressed correctly, but
may be increased to improve performance. This is more useful when the channel
is non-blocking.
<P></DL>
</DL>
<P></DL>
<H4><A NAME="M42">STREAMING SUBCOMMAND</A></H4>
<DL class="streaming subcommand">
<DT><A NAME="M43"><B>zlib stream</B><I> mode</I> ?<I>options</I>?</A><DD>
Creates a streaming compression or decompression command based on the
<I>mode</I>, and return the name of the command. For a description of how that
command works, see <B><A HREF="zlib.html#M53">STREAMING INSTANCE COMMAND</A></B> below. The following modes
and <I>options</I> are supported:
<P>
<DL class="streaming subcommand">
<DT><A NAME="M44"><B>zlib stream compress</B> ?<B>-dictionary </B><I>bindata</I>? ?<B>-level </B><I>level</I>?</A><DD>
The stream will be a compressing stream that produces zlib-format output,
using compression level <I>level</I> (if specified) which will be an integer
from 0 to 9,
and the compression dictionary <I>bindata</I> (if specified).
<P><DT><A NAME="M45"><B>zlib stream decompress</B> ?<B>-dictionary </B><I>bindata</I>?</A><DD>
The stream will be a decompressing stream that takes zlib-format input and
produces uncompressed output.
If <I>bindata</I> is supplied, it is a compression dictionary to use if
required.
<P><DT><A NAME="M46"><B>zlib stream deflate</B> ?<B>-dictionary </B><I>bindata</I>? ?<B>-level </B><I>level</I>?</A><DD>
The stream will be a compressing stream that produces raw output, using
compression level <I>level</I> (if specified) which will be an integer from 0
to 9,
and the compression dictionary <I>bindata</I> (if specified). Note that
the raw compressed data includes no metadata about what compression
dictionary was used, if any; that is a feature of the zlib-format data.
<P><DT><A NAME="M47"><B>zlib stream gunzip</B></A><DD>
The stream will be a decompressing stream that takes gzip-format input and
produces uncompressed output.
<P><DT><A NAME="M48"><B>zlib stream gzip</B> ?<B>-header </B><I>header</I>? ?<B>-level </B><I>level</I>?</A><DD>
The stream will be a compressing stream that produces gzip-format output,
using compression level <I>level</I> (if specified) which will be an integer
from 0 to 9, and the header descriptor dictionary <I>header</I> (if specified;
for keys see <B>zlib gzip</B>).
<P><DT><A NAME="M49"><B>zlib stream inflate</B> ?<B>-dictionary </B><I>bindata</I>?</A><DD>
The stream will be a decompressing stream that takes raw compressed input and
produces uncompressed output.
If <I>bindata</I> is supplied, it is a compression dictionary to use. Note that
there are no checks in place to determine whether the compression dictionary
is correct.
<P></DL>
<P></DL>
<H4><A NAME="M50">CHECKSUMMING SUBCOMMANDS</A></H4>
<DL class="checksumming subcommands">
<DT><A NAME="M51"><B>zlib adler32</B><I> string</I> ?<I>initValue</I>?</A><DD>
Compute a checksum of binary string <I>string</I> using the Adler-32 algorithm.
If given, <I>initValue</I> is used to initialize the checksum engine.
<P><DT><A NAME="M52"><B>zlib crc32</B><I> string</I> ?<I>initValue</I>?</A><DD>
Compute a checksum of binary string <I>string</I> using the CRC-32 algorithm.
If given, <I>initValue</I> is used to initialize the checksum engine.
<P></DL>
<H3><A NAME="M53">STREAMING INSTANCE COMMAND</A></H3>
Streaming compression instance commands are produced by the <B>zlib stream</B>
command. They are used by calling their <B>put</B> subcommand one or more times
to load data in, and their <B>get</B> subcommand one or more times to extract
the transformed data.
<P>
The full set of subcommands supported by a streaming instance command,
<I>stream</I>, is as follows:
<P>
<DL class="streaming instance command">
<DT><A NAME="M54"><I>stream </I><B>add</B> ?<I>option...</I>? <I>data</I></A><DD>
A short-cut for
&#8220;<I>stream </I><B>put </B>?<I>option...</I>? <I>data</I>&#8221;
followed by
&#8220;<I>stream </I><B>get</B>&#8221;.
<P><DT><A NAME="M55"><I>stream </I><B>checksum</B></A><DD>
Returns the checksum of the uncompressed data seen so far by this stream.
<P><DT><A NAME="M56"><I>stream </I><B>close</B></A><DD>
Deletes this stream and frees up all resources associated with it.
<P><DT><A NAME="M57"><I>stream </I><B>eof</B></A><DD>
Returns a boolean indicating whether the end of the stream (as determined by
the compressed data itself) has been reached. Not all formats support
detection of the end of the stream.
<P><DT><A NAME="M58"><I>stream </I><B>finalize</B></A><DD>
A short-cut for
&#8220;<I>stream </I><B>put -finalize {}</B>&#8221;.
<P><DT><A NAME="M59"><I>stream </I><B>flush</B></A><DD>
A short-cut for
&#8220;<I>stream </I><B>put -flush {}</B>&#8221;.
<P><DT><A NAME="M60"><I>stream </I><B>fullflush</B></A><DD>
A short-cut for
&#8220;<I>stream </I><B>put -fullflush {}</B>&#8221;.
<P><DT><A NAME="M61"><I>stream </I><B>get </B>?<I>count</I>?</A><DD>
Return up to <I>count</I> bytes from <I>stream</I>'s internal buffers with the
transformation applied. If <I>count</I> is omitted, the entire contents of the
buffers are returned.
<I>stream </I><B>header</B>
Return the gzip header description dictionary extracted from the stream. Only
supported for streams created with their <I>mode</I> parameter set to
<B>gunzip</B>.
<P><DT><A NAME="M62"><I>stream </I><B>put</B> ?<I>option...</I>? <I>data</I></A><DD>
Append the contents of the binary string <I>data</I> to <I>stream</I>'s internal
buffers while applying the transformation. The following <I>option</I>s are
supported (or an unambiguous prefix of them), which are used to modify the
way in which the transformation is applied:
<P>
<DL class="streaming instance command">
<DT><A NAME="M63"><B>-dictionary</B><I> binData</I></A><DD>
Sets the compression dictionary to use when working with compressing or
decompressing the data to be <I>binData</I>.
<P><DT><A NAME="M64"><B>-finalize</B></A><DD>
Mark the stream as finished, ensuring that all bytes have been wholly
compressed or decompressed. For gzip streams, this also ensures that the
footer is written to the stream. The stream will need to be reset before
having more data written to it after this, though data can still be read out
of the stream with the <B>get</B> subcommand.
<P>
This option is mutually exclusive with the <B>-flush</B> and <B>-fullflush</B>
options.
<P><DT><A NAME="M65"><B>-flush</B></A><DD>
Ensure that a decompressor consuming the bytes that the current (compressing)
stream is producing will be able to produce all the bytes that have been
compressed so far, at some performance penalty.
<P>
This option is mutually exclusive with the <B>-finalize</B> and
<B>-fullflush</B> options.
<P><DT><A NAME="M66"><B>-fullflush</B></A><DD>
Ensure that not only can a decompressor handle all the bytes produced so far
(as with <B>-flush</B> above) but also that it can restart from this point if
it detects that the stream is partially corrupt. This incurs a substantial
performance penalty.
<P>
This option is mutually exclusive with the <B>-finalize</B> and <B>-flush</B>
options.
<P></DL>
<P><DT><A NAME="M67"><I>stream </I><B>reset</B></A><DD>
Puts any stream, including those that have been finalized or that have reached
eof, back into a state where it can process more data. Throws away all
internally buffered data.
<P></DL>
<H3><A NAME="M68">EXAMPLES</A></H3>
To compress a Tcl string, it should be first converted to a particular charset
encoding since the <B>zlib</B> command always operates on binary strings.
<P>
<PRE>set binData [encoding convertto utf-8 $string]
set compData [<B>zlib compress</B> $binData]</PRE>
<P>
When converting back, it is also important to reverse the charset encoding:
<P>
<PRE>set binData [<B>zlib decompress</B> $compData]
set string [encoding convertfrom utf-8 $binData]</PRE>
<P>
The compression operation from above can also be done with streams, which is
especially helpful when you want to accumulate the data by stages:
<P>
<PRE>set strm [<B>zlib stream</B> compress]
$<I>strm </I><B>put</B> [encoding convertto utf-8 $string]
# ...
$<I>strm </I><B>finalize</B>
set compData [$<I>strm </I><B>get</B>]
$<I>strm </I><B>close</B></PRE>
<H3><A NAME="M69">SEE ALSO</A></H3>
<B>binary</B>, <B><A HREF="chan.html">chan</A></B>, <B><A HREF="encoding.html">encoding</A></B>, <B><A HREF="../TclLib/TclZlib.html">Tcl_ZlibDeflate</A></B>, <B>RFC1950 - RFC1952</B>
<H3><A NAME="M70">KEYWORDS</A></H3>
<A href="../Keywords/C.html#compress">compress</A>, <A href="../Keywords/D.html#decompress">decompress</A>, <A href="../Keywords/D.html#deflate">deflate</A>, <A href="../Keywords/G.html#gzip">gzip</A>, <A href="../Keywords/I.html#inflate">inflate</A>, <A href="../Keywords/Z.html#zlib">zlib</A>
<div class="copy">Copyright &copy; 2008-2012 Donal K. Fellows
</div>
</BODY></HTML>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				<div class="as_footer">
  
  <div class="prod_links">
    <strong>
      <a href="http://platform.activestate.com/" target="_blank">ActiveState Platform</a>&nbsp;&nbsp;
      <a href="http://www.activestate.com/downloads" target="_blank">Downloads</a>&nbsp;&nbsp;
      <a href="http://community.activestate.com/" target="_blank">Community</a>&nbsp;&nbsp;
      <a href="http://github.com/activestate/code" target="_blank">Code Recipes</a>&nbsp;&nbsp;
    </strong>
  </div>
  <div class="as_copyright"> 
    &copy; 2019 ActiveState Software Inc. All rights reserved. <strong><a href="../../trademarks/index.html">Trademarks</a>. <a href="http://www.activestate.com/privacy-policy">Privacy Policy</a>.</strong>
  </div>
</div>

			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="../../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "¶";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-20072-24', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="../../javascripts/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

